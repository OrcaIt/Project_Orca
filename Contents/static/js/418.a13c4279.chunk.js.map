{"version":3,"file":"static/js/418.a13c4279.chunk.js","mappings":"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","sources":["../node_modules/@aws-sdk/client-lex-runtime-service/models/models_0.ts","../node_modules/@aws-amplify/interactions/src/Providers/InteractionsProvider.ts","../node_modules/@aws-sdk/client-lex-runtime-service/endpoints.ts","../node_modules/@aws-sdk/client-lex-runtime-service/runtimeConfig.shared.ts","../node_modules/@aws-sdk/client-lex-runtime-service/runtimeConfig.browser.ts","../node_modules/@aws-sdk/client-lex-runtime-service/LexRuntimeServiceClient.ts","../node_modules/@aws-sdk/client-lex-runtime-service/protocols/Aws_restJson1.ts","../node_modules/@aws-sdk/client-lex-runtime-service/commands/PostTextCommand.ts","../node_modules/@aws-sdk/client-lex-runtime-service/commands/PostContentCommand.ts","../node_modules/@aws-amplify/interactions/src/Providers/AWSLexProviderHelper/convert.ts","../node_modules/@aws-amplify/interactions/src/Providers/AWSLexProvider.ts","../node_modules/@aws-amplify/interactions/src/Interactions.ts","../node_modules/@aws-amplify/ui-components/dist/esm-es5/amplify-chatbot.entry.js"],"sourcesContent":["import {\n  SENSITIVE_STRING,\n  LazyJsonString as __LazyJsonString,\n  SmithyException as __SmithyException,\n} from \"@aws-sdk/smithy-client\";\nimport { MetadataBearer as $MetadataBearer } from \"@aws-sdk/types\";\nimport { Readable } from \"stream\";\n\n/**\n * <p>The length of time or number of turns that a context remains active.</p>\n */\nexport interface ActiveContextTimeToLive {\n  /**\n   * <p>The number of seconds that the context should be active after it is first sent in a\n   *         <code>PostContent</code> or <code>PostText</code> response. You can set the value between 5\n   *       and 86,400 seconds (24 hours).</p>\n   */\n  timeToLiveInSeconds?: number;\n\n  /**\n   * <p>The number of conversation turns that the context should be active. A conversation turn is\n   *       one <code>PostContent</code> or <code>PostText</code> request and the corresponding response\n   *       from Amazon Lex.</p>\n   */\n  turnsToLive?: number;\n}\n\nexport namespace ActiveContextTimeToLive {\n  export const filterSensitiveLog = (obj: ActiveContextTimeToLive): any => ({\n    ...obj,\n  });\n}\n\n/**\n * <p>A context is a variable that contains information about the current state of the\n *       conversation between a user and Amazon Lex. Context can be set automatically by Amazon Lex when an\n *       intent is fulfilled, or it can be set at runtime using the <code>PutContent</code>,\n *         <code>PutText</code>, or <code>PutSession</code> operation.</p>\n */\nexport interface ActiveContext {\n  /**\n   * <p>The name of the context.</p>\n   */\n  name: string | undefined;\n\n  /**\n   * <p>The length of time or number of turns that a context remains active.</p>\n   */\n  timeToLive: ActiveContextTimeToLive | undefined;\n\n  /**\n   * <p>State variables for the current context. You can use these values as default values for\n   *       slots in subsequent events.</p>\n   */\n  parameters: { [key: string]: string } | undefined;\n}\n\nexport namespace ActiveContext {\n  export const filterSensitiveLog = (obj: ActiveContext): any => ({\n    ...obj,\n    ...(obj.parameters && { parameters: SENSITIVE_STRING }),\n  });\n}\n\n/**\n * <p> Request validation failed, there is no usable message in the context, or the bot build\n *       failed, is still in progress, or contains unbuilt changes. </p>\n */\nexport interface BadRequestException extends __SmithyException, $MetadataBearer {\n  name: \"BadRequestException\";\n  $fault: \"client\";\n  message?: string;\n}\n\nexport namespace BadRequestException {\n  export const filterSensitiveLog = (obj: BadRequestException): any => ({\n    ...obj,\n  });\n}\n\n/**\n * <p> Two clients are using the same AWS account, Amazon Lex bot, and user ID. </p>\n */\nexport interface ConflictException extends __SmithyException, $MetadataBearer {\n  name: \"ConflictException\";\n  $fault: \"client\";\n  message?: string;\n}\n\nexport namespace ConflictException {\n  export const filterSensitiveLog = (obj: ConflictException): any => ({\n    ...obj,\n  });\n}\n\nexport interface DeleteSessionRequest {\n  /**\n   * <p>The name of the bot that contains the session data.</p>\n   */\n  botName: string | undefined;\n\n  /**\n   * <p>The alias in use for the bot that contains the session data.</p>\n   */\n  botAlias: string | undefined;\n\n  /**\n   * <p>The identifier of the user associated with the session data.</p>\n   */\n  userId: string | undefined;\n}\n\nexport namespace DeleteSessionRequest {\n  export const filterSensitiveLog = (obj: DeleteSessionRequest): any => ({\n    ...obj,\n  });\n}\n\nexport interface DeleteSessionResponse {\n  /**\n   * <p>The name of the bot associated with the session data.</p>\n   */\n  botName?: string;\n\n  /**\n   * <p>The alias in use for the bot associated with the session data.</p>\n   */\n  botAlias?: string;\n\n  /**\n   * <p>The ID of the client application user.</p>\n   */\n  userId?: string;\n\n  /**\n   * <p>The unique identifier for the session.</p>\n   */\n  sessionId?: string;\n}\n\nexport namespace DeleteSessionResponse {\n  export const filterSensitiveLog = (obj: DeleteSessionResponse): any => ({\n    ...obj,\n  });\n}\n\n/**\n * <p>Internal service error. Retry the call.</p>\n */\nexport interface InternalFailureException extends __SmithyException, $MetadataBearer {\n  name: \"InternalFailureException\";\n  $fault: \"server\";\n  message?: string;\n}\n\nexport namespace InternalFailureException {\n  export const filterSensitiveLog = (obj: InternalFailureException): any => ({\n    ...obj,\n  });\n}\n\n/**\n * <p>Exceeded a limit.</p>\n */\nexport interface LimitExceededException extends __SmithyException, $MetadataBearer {\n  name: \"LimitExceededException\";\n  $fault: \"client\";\n  retryAfterSeconds?: string;\n  message?: string;\n}\n\nexport namespace LimitExceededException {\n  export const filterSensitiveLog = (obj: LimitExceededException): any => ({\n    ...obj,\n  });\n}\n\n/**\n * <p>The resource (such as the Amazon Lex bot or an alias) that is referred to is not\n *       found.</p>\n */\nexport interface NotFoundException extends __SmithyException, $MetadataBearer {\n  name: \"NotFoundException\";\n  $fault: \"client\";\n  message?: string;\n}\n\nexport namespace NotFoundException {\n  export const filterSensitiveLog = (obj: NotFoundException): any => ({\n    ...obj,\n  });\n}\n\nexport interface GetSessionRequest {\n  /**\n   * <p>The name of the bot that contains the session data.</p>\n   */\n  botName: string | undefined;\n\n  /**\n   * <p>The alias in use for the bot that contains the session data.</p>\n   */\n  botAlias: string | undefined;\n\n  /**\n   * <p>The ID of the client application user. Amazon Lex uses this to identify a user's conversation\n   *       with your bot. </p>\n   */\n  userId: string | undefined;\n\n  /**\n   * <p>A string used to filter the intents returned in the <code>recentIntentSummaryView</code>\n   *       structure. </p>\n   *          <p>When you specify a filter, only intents with their <code>checkpointLabel</code> field set\n   *       to that string are returned.</p>\n   */\n  checkpointLabelFilter?: string;\n}\n\nexport namespace GetSessionRequest {\n  export const filterSensitiveLog = (obj: GetSessionRequest): any => ({\n    ...obj,\n  });\n}\n\nexport enum FulfillmentState {\n  FAILED = \"Failed\",\n  FULFILLED = \"Fulfilled\",\n  READY_FOR_FULFILLMENT = \"ReadyForFulfillment\",\n}\n\nexport enum MessageFormatType {\n  COMPOSITE = \"Composite\",\n  CUSTOM_PAYLOAD = \"CustomPayload\",\n  PLAIN_TEXT = \"PlainText\",\n  SSML = \"SSML\",\n}\n\nexport enum DialogActionType {\n  CLOSE = \"Close\",\n  CONFIRM_INTENT = \"ConfirmIntent\",\n  DELEGATE = \"Delegate\",\n  ELICIT_INTENT = \"ElicitIntent\",\n  ELICIT_SLOT = \"ElicitSlot\",\n}\n\n/**\n * <p>Describes the next action that the bot should take in its interaction with the user and\n *       provides information about the context in which the action takes place. Use the\n *         <code>DialogAction</code> data type to set the interaction to a specific state, or to return\n *       the interaction to a previous state.</p>\n */\nexport interface DialogAction {\n  /**\n   * <p>The next action that the bot should take in its interaction with the user. The possible\n   *       values are:</p>\n   *          <ul>\n   *             <li>\n   *                <p>\n   *                   <code>ConfirmIntent</code> - The next action is asking the user if the intent is\n   *           complete and ready to be fulfilled. This is a yes/no question such as \"Place the\n   *           order?\"</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>Close</code> - Indicates that the there will not be a response from the user.\n   *           For example, the statement \"Your order has been placed\" does not require a\n   *           response.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>Delegate</code> - The next action is determined by Amazon Lex.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>ElicitIntent</code> - The next action is to determine the intent that the user\n   *           wants to fulfill.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>ElicitSlot</code> - The next action is to elicit a slot value from the\n   *           user.</p>\n   *             </li>\n   *          </ul>\n   */\n  type: DialogActionType | string | undefined;\n\n  /**\n   * <p>The name of the intent.</p>\n   */\n  intentName?: string;\n\n  /**\n   * <p>Map of the slots that have been gathered and their values. </p>\n   */\n  slots?: { [key: string]: string };\n\n  /**\n   * <p>The name of the slot that should be elicited from the user.</p>\n   */\n  slotToElicit?: string;\n\n  /**\n   * <p>The fulfillment state of the intent. The possible values are:</p>\n   *          <ul>\n   *             <li>\n   *                <p>\n   *                   <code>Failed</code> - The Lambda function associated with the intent failed to fulfill\n   *           the intent.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>Fulfilled</code> - The intent has fulfilled by the Lambda function associated\n   *           with the intent. </p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>ReadyForFulfillment</code> - All of the information necessary for the intent is\n   *           present and the intent ready to be fulfilled by the client application.</p>\n   *             </li>\n   *          </ul>\n   */\n  fulfillmentState?: FulfillmentState | string;\n\n  /**\n   * <p>The message that should be shown to the user. If you don't specify a message, Amazon Lex will\n   *       use the message configured for the intent.</p>\n   */\n  message?: string;\n\n  /**\n   * <ul>\n   *             <li>\n   *                <p>\n   *                   <code>PlainText</code> - The message contains plain UTF-8 text.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>CustomPayload</code> - The message is a custom format for the client.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>SSML</code> - The message contains text formatted for voice output.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>Composite</code> - The message contains an escaped JSON object containing one or\n   *           more messages. For more information, see <a href=\"https://docs.aws.amazon.com/lex/latest/dg/howitworks-manage-prompts.html\">Message\n   *             Groups</a>. </p>\n   *             </li>\n   *          </ul>\n   */\n  messageFormat?: MessageFormatType | string;\n}\n\nexport namespace DialogAction {\n  export const filterSensitiveLog = (obj: DialogAction): any => ({\n    ...obj,\n    ...(obj.slots && { slots: SENSITIVE_STRING }),\n    ...(obj.message && { message: SENSITIVE_STRING }),\n  });\n}\n\nexport enum ConfirmationStatus {\n  CONFIRMED = \"Confirmed\",\n  DENIED = \"Denied\",\n  NONE = \"None\",\n}\n\n/**\n * <p>Provides information about the state of an intent. You can use this information to get the\n *       current state of an intent so that you can process the intent, or so that you can return the\n *       intent to its previous state.</p>\n */\nexport interface IntentSummary {\n  /**\n   * <p>The name of the intent.</p>\n   */\n  intentName?: string;\n\n  /**\n   * <p>A user-defined label that identifies a particular intent. You can use this label to return\n   *       to a previous intent. </p>\n   *          <p>Use the <code>checkpointLabelFilter</code> parameter of the <code>GetSessionRequest</code>\n   *       operation to filter the intents returned by the operation to those with only the specified\n   *       label.</p>\n   */\n  checkpointLabel?: string;\n\n  /**\n   * <p>Map of the slots that have been gathered and their values. </p>\n   */\n  slots?: { [key: string]: string };\n\n  /**\n   * <p>The status of the intent after the user responds to the confirmation prompt. If the user\n   *       confirms the intent, Amazon Lex sets this field to <code>Confirmed</code>. If the user denies the\n   *       intent, Amazon Lex sets this value to <code>Denied</code>. The possible values are:</p>\n   *          <ul>\n   *             <li>\n   *                <p>\n   *                   <code>Confirmed</code> - The user has responded \"Yes\" to the confirmation prompt,\n   *           confirming that the intent is complete and that it is ready to be fulfilled.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>Denied</code> - The user has responded \"No\" to the confirmation prompt.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>None</code> - The user has never been prompted for confirmation; or, the user\n   *           was prompted but did not confirm or deny the prompt.</p>\n   *             </li>\n   *          </ul>\n   */\n  confirmationStatus?: ConfirmationStatus | string;\n\n  /**\n   * <p>The next action that the bot should take in its interaction with the user. The possible\n   *       values are:</p>\n   *          <ul>\n   *             <li>\n   *                <p>\n   *                   <code>ConfirmIntent</code> - The next action is asking the user if the intent is\n   *           complete and ready to be fulfilled. This is a yes/no question such as \"Place the\n   *           order?\"</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>Close</code> - Indicates that the there will not be a response from the user.\n   *           For example, the statement \"Your order has been placed\" does not require a\n   *           response.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>ElicitIntent</code> - The next action is to determine the intent that the user\n   *           wants to fulfill.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>ElicitSlot</code> - The next action is to elicit a slot value from the\n   *           user.</p>\n   *             </li>\n   *          </ul>\n   */\n  dialogActionType: DialogActionType | string | undefined;\n\n  /**\n   * <p>The fulfillment state of the intent. The possible values are:</p>\n   *          <ul>\n   *             <li>\n   *                <p>\n   *                   <code>Failed</code> - The Lambda function associated with the intent failed to fulfill\n   *           the intent.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>Fulfilled</code> - The intent has fulfilled by the Lambda function associated\n   *           with the intent. </p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>ReadyForFulfillment</code> - All of the information necessary for the intent is\n   *           present and the intent ready to be fulfilled by the client application.</p>\n   *             </li>\n   *          </ul>\n   */\n  fulfillmentState?: FulfillmentState | string;\n\n  /**\n   * <p>The next slot to elicit from the user. If there is not slot to elicit, the field is\n   *       blank.</p>\n   */\n  slotToElicit?: string;\n}\n\nexport namespace IntentSummary {\n  export const filterSensitiveLog = (obj: IntentSummary): any => ({\n    ...obj,\n    ...(obj.slots && { slots: SENSITIVE_STRING }),\n  });\n}\n\nexport interface GetSessionResponse {\n  /**\n   * <p>An array of information about the intents used in the session. The array can contain a\n   *       maximum of three summaries. If more than three intents are used in the session, the\n   *         <code>recentIntentSummaryView</code> operation contains information about the last three\n   *       intents used.</p>\n   *          <p>If you set the <code>checkpointLabelFilter</code> parameter in the request, the array\n   *       contains only the intents with the specified label.</p>\n   */\n  recentIntentSummaryView?: IntentSummary[];\n\n  /**\n   * <p>Map of key/value pairs representing the session-specific context information. It contains\n   *       application information passed between Amazon Lex and a client application.</p>\n   */\n  sessionAttributes?: { [key: string]: string };\n\n  /**\n   * <p>A unique identifier for the session.</p>\n   */\n  sessionId?: string;\n\n  /**\n   * <p>Describes the current state of the bot.</p>\n   */\n  dialogAction?: DialogAction;\n\n  /**\n   * <p>A list of active contexts for the session. A context can be set when an intent\n   *     is fulfilled or by calling the <code>PostContent</code>, <code>PostText</code>,\n   *     or <code>PutSession</code> operation.</p>\n   *          <p>You can use a context to control the intents that can follow up an intent,\n   *     or to modify the operation of your application.</p>\n   */\n  activeContexts?: ActiveContext[];\n}\n\nexport namespace GetSessionResponse {\n  export const filterSensitiveLog = (obj: GetSessionResponse): any => ({\n    ...obj,\n    ...(obj.recentIntentSummaryView && {\n      recentIntentSummaryView: obj.recentIntentSummaryView.map((item) => IntentSummary.filterSensitiveLog(item)),\n    }),\n    ...(obj.sessionAttributes && { sessionAttributes: SENSITIVE_STRING }),\n    ...(obj.dialogAction && { dialogAction: DialogAction.filterSensitiveLog(obj.dialogAction) }),\n    ...(obj.activeContexts && { activeContexts: SENSITIVE_STRING }),\n  });\n}\n\n/**\n * <p>Either the Amazon Lex bot is still building, or one of the dependent services (Amazon Polly,\n *       AWS Lambda) failed with an internal service error.</p>\n */\nexport interface BadGatewayException extends __SmithyException, $MetadataBearer {\n  name: \"BadGatewayException\";\n  $fault: \"server\";\n  Message?: string;\n}\n\nexport namespace BadGatewayException {\n  export const filterSensitiveLog = (obj: BadGatewayException): any => ({\n    ...obj,\n  });\n}\n\n/**\n * <p> One of the dependencies, such as AWS Lambda or Amazon Polly, threw an exception. For example, </p>\n *          <ul>\n *             <li>\n *                <p>If Amazon Lex does not have sufficient permissions to call a Lambda function.</p>\n *             </li>\n *             <li>\n *                <p>If a Lambda function takes longer than 30 seconds to execute.</p>\n *             </li>\n *             <li>\n *                <p>If a fulfillment Lambda function returns a <code>Delegate</code> dialog action without\n *           removing any slot values.</p>\n *             </li>\n *          </ul>\n */\nexport interface DependencyFailedException extends __SmithyException, $MetadataBearer {\n  name: \"DependencyFailedException\";\n  $fault: \"client\";\n  Message?: string;\n}\n\nexport namespace DependencyFailedException {\n  export const filterSensitiveLog = (obj: DependencyFailedException): any => ({\n    ...obj,\n  });\n}\n\n/**\n * <p>This exception is not used.</p>\n */\nexport interface LoopDetectedException extends __SmithyException, $MetadataBearer {\n  name: \"LoopDetectedException\";\n  $fault: \"server\";\n  Message?: string;\n}\n\nexport namespace LoopDetectedException {\n  export const filterSensitiveLog = (obj: LoopDetectedException): any => ({\n    ...obj,\n  });\n}\n\n/**\n * <p>The accept header in the request does not have a valid value.</p>\n */\nexport interface NotAcceptableException extends __SmithyException, $MetadataBearer {\n  name: \"NotAcceptableException\";\n  $fault: \"client\";\n  message?: string;\n}\n\nexport namespace NotAcceptableException {\n  export const filterSensitiveLog = (obj: NotAcceptableException): any => ({\n    ...obj,\n  });\n}\n\nexport interface PostContentRequest {\n  /**\n   * <p>Name of the Amazon Lex bot.</p>\n   */\n  botName: string | undefined;\n\n  /**\n   * <p>Alias of the Amazon Lex bot.</p>\n   */\n  botAlias: string | undefined;\n\n  /**\n   * <p>The ID of the client application user. Amazon Lex uses this to identify a user's conversation\n   *       with your bot. At runtime, each request must contain the <code>userID</code> field.</p>\n   *          <p>To decide the user ID to use for your application, consider the following factors.</p>\n   *          <ul>\n   *             <li>\n   *                <p>The <code>userID</code> field must not contain any personally identifiable information\n   *           of the user, for example, name, personal identification numbers, or other end user\n   *           personal information.</p>\n   *             </li>\n   *             <li>\n   *                <p>If you want a user to start a conversation on one device and continue on another\n   *           device, use a user-specific identifier.</p>\n   *             </li>\n   *             <li>\n   *                <p>If you want the same user to be able to have two independent conversations on two\n   *           different devices, choose a device-specific identifier.</p>\n   *             </li>\n   *             <li>\n   *                <p>A user can't have two independent conversations with two different versions of the\n   *           same bot. For example, a user can't have a conversation with the PROD and BETA versions of\n   *           the same bot. If you anticipate that a user will need to have conversation with two\n   *           different versions, for example, while testing, include the bot alias in the user ID to\n   *           separate the two conversations.</p>\n   *             </li>\n   *          </ul>\n   */\n  userId: string | undefined;\n\n  /**\n   * <p>You pass this value as the <code>x-amz-lex-session-attributes</code> HTTP header.</p>\n   *          <p>Application-specific information passed between Amazon Lex and a client application. The value\n   *       must be a JSON serialized and base64 encoded map with string keys and values. The total size\n   *       of the <code>sessionAttributes</code> and <code>requestAttributes</code> headers is limited to\n   *       12 KB.</p>\n   *          <p>For more information, see <a href=\"https://docs.aws.amazon.com/lex/latest/dg/context-mgmt.html#context-mgmt-session-attribs\">Setting Session\n   *         Attributes</a>.</p>\n   */\n  sessionAttributes?: __LazyJsonString | string;\n\n  /**\n   * <p>You pass this value as the <code>x-amz-lex-request-attributes</code> HTTP header.</p>\n   *          <p>Request-specific information passed between Amazon Lex and a client application. The value must\n   *       be a JSON serialized and base64 encoded map with string keys and values. The total size of the\n   *         <code>requestAttributes</code> and <code>sessionAttributes</code> headers is limited to 12\n   *       KB.</p>\n   *          <p>The namespace <code>x-amz-lex:</code> is reserved for special attributes. Don't create any\n   *       request attributes with the prefix <code>x-amz-lex:</code>.</p>\n   *          <p>For more information, see <a href=\"https://docs.aws.amazon.com/lex/latest/dg/context-mgmt.html#context-mgmt-request-attribs\">Setting Request\n   *         Attributes</a>.</p>\n   */\n  requestAttributes?: __LazyJsonString | string;\n\n  /**\n   * <p> You pass this value as the <code>Content-Type</code> HTTP header. </p>\n   *          <p> Indicates the audio format or text. The header value must start with one of the following\n   *       prefixes: </p>\n   *          <ul>\n   *             <li>\n   *                <p>PCM format, audio data must be in little-endian byte order.</p>\n   *                <ul>\n   *                   <li>\n   *                      <p>audio/l16; rate=16000; channels=1</p>\n   *                   </li>\n   *                   <li>\n   *                      <p>audio/x-l16; sample-rate=16000; channel-count=1</p>\n   *                   </li>\n   *                   <li>\n   *                      <p>audio/lpcm; sample-rate=8000; sample-size-bits=16; channel-count=1;\n   *               is-big-endian=false </p>\n   *                   </li>\n   *                </ul>\n   *             </li>\n   *             <li>\n   *                <p>Opus format</p>\n   *                <ul>\n   *                   <li>\n   *                      <p>audio/x-cbr-opus-with-preamble; preamble-size=0; bit-rate=256000;\n   *               frame-size-milliseconds=4</p>\n   *                   </li>\n   *                </ul>\n   *             </li>\n   *             <li>\n   *                <p>Text format</p>\n   *                <ul>\n   *                   <li>\n   *                      <p>text/plain; charset=utf-8</p>\n   *                   </li>\n   *                </ul>\n   *             </li>\n   *          </ul>\n   */\n  contentType: string | undefined;\n\n  /**\n   * <p> You pass this value as the <code>Accept</code> HTTP header. </p>\n   *          <p> The message Amazon Lex returns in the response can be either text or speech based on the\n   *         <code>Accept</code> HTTP header value in the request. </p>\n   *          <ul>\n   *             <li>\n   *                <p> If the value is <code>text/plain; charset=utf-8</code>, Amazon Lex returns text in the\n   *           response. </p>\n   *             </li>\n   *             <li>\n   *                <p> If the value begins with <code>audio/</code>, Amazon Lex returns speech in the response.\n   *           Amazon Lex uses Amazon Polly to generate the speech (using the configuration you specified in the\n   *             <code>Accept</code> header). For example, if you specify <code>audio/mpeg</code> as the\n   *           value, Amazon Lex returns speech in the MPEG format.</p>\n   *             </li>\n   *             <li>\n   *                <p>If the value is <code>audio/pcm</code>, the speech returned is <code>audio/pcm</code>\n   *           in 16-bit, little endian format.\n   *           </p>\n   *             </li>\n   *             <li>\n   *                <p>The following are the accepted values:</p>\n   *                <ul>\n   *                   <li>\n   *                      <p>audio/mpeg</p>\n   *                   </li>\n   *                   <li>\n   *                      <p>audio/ogg</p>\n   *                   </li>\n   *                   <li>\n   *                      <p>audio/pcm</p>\n   *                   </li>\n   *                   <li>\n   *                      <p>text/plain; charset=utf-8</p>\n   *                   </li>\n   *                   <li>\n   *                      <p>audio/* (defaults to mpeg)</p>\n   *                   </li>\n   *                </ul>\n   *             </li>\n   *          </ul>\n   */\n  accept?: string;\n\n  /**\n   * <p> User input in PCM or Opus audio format or text format as described in the\n   *         <code>Content-Type</code> HTTP header. </p>\n   *          <p>You can stream audio data to Amazon Lex or you can create a local buffer that captures all of\n   *       the audio data before sending. In general, you get better performance if you stream audio data\n   *       rather than buffering the data locally.</p>\n   */\n  inputStream: Readable | ReadableStream | Blob | undefined;\n\n  /**\n   * <p>A list of contexts active for the request. A context can be activated when a previous\n   *       intent is fulfilled, or by including the context in the request,</p>\n   *          <p>If you don't specify a list of contexts, Amazon Lex will use the current list of contexts for\n   *       the session. If you specify an empty list, all contexts for the session are cleared.</p>\n   */\n  activeContexts?: __LazyJsonString | string;\n}\n\nexport namespace PostContentRequest {\n  export const filterSensitiveLog = (obj: PostContentRequest): any => ({\n    ...obj,\n    ...(obj.sessionAttributes && { sessionAttributes: SENSITIVE_STRING }),\n    ...(obj.requestAttributes && { requestAttributes: SENSITIVE_STRING }),\n    ...(obj.activeContexts && { activeContexts: SENSITIVE_STRING }),\n  });\n}\n\nexport enum DialogState {\n  CONFIRM_INTENT = \"ConfirmIntent\",\n  ELICIT_INTENT = \"ElicitIntent\",\n  ELICIT_SLOT = \"ElicitSlot\",\n  FAILED = \"Failed\",\n  FULFILLED = \"Fulfilled\",\n  READY_FOR_FULFILLMENT = \"ReadyForFulfillment\",\n}\n\nexport interface PostContentResponse {\n  /**\n   * <p>Content type as specified in the <code>Accept</code> HTTP header in the request.</p>\n   */\n  contentType?: string;\n\n  /**\n   * <p>Current user intent that Amazon Lex is aware of.</p>\n   */\n  intentName?: string;\n\n  /**\n   * <p>Provides a score that indicates how confident Amazon Lex is that the returned intent is the one\n   *       that matches the user's intent. The score is between 0.0 and 1.0.</p>\n   *          <p>The score is a relative score, not an absolute score. The score may change based on\n   *       improvements to Amazon Lex. </p>\n   */\n  nluIntentConfidence?: __LazyJsonString | string;\n\n  /**\n   * <p>One to four alternative intents that may be applicable to the user's intent.</p>\n   *          <p>Each alternative includes a score that indicates how confident Amazon Lex is that the intent\n   *       matches the user's intent. The intents are sorted by the confidence score.</p>\n   */\n  alternativeIntents?: __LazyJsonString | string;\n\n  /**\n   * <p>Map of zero or more intent slots (name/value pairs) Amazon Lex detected from the user input\n   *       during the conversation. The field is base-64 encoded.</p>\n   *          <p>Amazon Lex creates a resolution list containing likely values for a slot. The value that it\n   *       returns is determined by the <code>valueSelectionStrategy</code> selected when the slot type\n   *       was created or updated. If <code>valueSelectionStrategy</code> is set to\n   *         <code>ORIGINAL_VALUE</code>, the value provided by the user is returned, if the user value\n   *       is similar to the slot values. If <code>valueSelectionStrategy</code> is set to\n   *         <code>TOP_RESOLUTION</code> Amazon Lex returns the first value in the resolution list or, if\n   *       there is no resolution list, null. If you don't specify a <code>valueSelectionStrategy</code>,\n   *       the default is <code>ORIGINAL_VALUE</code>.</p>\n   */\n  slots?: __LazyJsonString | string;\n\n  /**\n   * <p> Map of key/value pairs representing the session-specific context information. </p>\n   */\n  sessionAttributes?: __LazyJsonString | string;\n\n  /**\n   * <p>The sentiment expressed in an utterance.</p>\n   *          <p>When the bot is configured to send utterances to Amazon Comprehend for sentiment analysis,\n   *       this field contains the result of the analysis.</p>\n   */\n  sentimentResponse?: string;\n\n  /**\n   * <p>The message to convey to the user. The message can come from the bot's configuration or\n   *       from a Lambda function.</p>\n   *          <p>If the intent is not configured with a Lambda function, or if the Lambda function returned\n   *         <code>Delegate</code> as the <code>dialogAction.type</code> in its response, Amazon Lex decides\n   *       on the next course of action and selects an appropriate message from the bot's configuration\n   *       based on the current interaction context. For example, if Amazon Lex isn't able to understand user\n   *       input, it uses a clarification prompt message.</p>\n   *          <p>When you create an intent you can assign messages to groups. When messages are assigned to\n   *       groups Amazon Lex returns one message from each group in the response. The message field is an\n   *       escaped JSON string containing the messages. For more information about the structure of the\n   *       JSON string returned, see <a>msg-prompts-formats</a>.</p>\n   *          <p>If the Lambda function returns a message, Amazon Lex passes it to the client in its\n   *       response.</p>\n   */\n  message?: string;\n\n  /**\n   * <p>The format of the response message. One of the following values:</p>\n   *          <ul>\n   *             <li>\n   *                <p>\n   *                   <code>PlainText</code> - The message contains plain UTF-8 text.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>CustomPayload</code> - The message is a custom format for the client.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>SSML</code> - The message contains text formatted for voice output.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>Composite</code> - The message contains an escaped JSON object containing one or\n   *           more messages from the groups that messages were assigned to when the intent was\n   *           created.</p>\n   *             </li>\n   *          </ul>\n   */\n  messageFormat?: MessageFormatType | string;\n\n  /**\n   * <p>Identifies the current state of the user interaction. Amazon Lex returns one of the following\n   *       values as <code>dialogState</code>. The client can optionally use this information to\n   *       customize the user interface. </p>\n   *          <ul>\n   *             <li>\n   *                <p>\n   *                   <code>ElicitIntent</code> - Amazon Lex wants to elicit the user's intent. Consider the\n   *           following examples: </p>\n   *                <p> For example, a user might utter an intent (\"I want to order a pizza\"). If Amazon Lex\n   *           cannot infer the user intent from this utterance, it will return this dialog state.\n   *         </p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>ConfirmIntent</code> - Amazon Lex is expecting a \"yes\" or \"no\" response. </p>\n   *                <p>For example, Amazon Lex wants user confirmation before fulfilling an intent. Instead of a\n   *           simple \"yes\" or \"no\" response, a user might respond with additional information. For\n   *           example, \"yes, but make it a thick crust pizza\" or \"no, I want to order a drink.\" Amazon Lex\n   *           can process such additional information (in these examples, update the crust type slot or\n   *           change the intent from OrderPizza to OrderDrink). </p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>ElicitSlot</code> - Amazon Lex is expecting the value of a slot for the current intent. </p>\n   *                <p> For example, suppose that in the response Amazon Lex sends this message: \"What size pizza\n   *           would you like?\". A user might reply with the slot value (e.g., \"medium\"). The user might\n   *           also provide additional information in the response (e.g., \"medium thick crust pizza\").\n   *           Amazon Lex can process such additional information appropriately. </p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>Fulfilled</code> - Conveys that the Lambda function has successfully fulfilled the\n   *           intent. </p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>ReadyForFulfillment</code> - Conveys that the client has to fulfill the request.\n   *         </p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>Failed</code> - Conveys that the conversation with the user failed. </p>\n   *                <p> This can happen for various reasons, including that the user does not provide an\n   *           appropriate response to prompts from the service (you can configure how many times Amazon Lex\n   *           can prompt a user for specific information), or if the Lambda function fails to fulfill the\n   *           intent. </p>\n   *             </li>\n   *          </ul>\n   */\n  dialogState?: DialogState | string;\n\n  /**\n   * <p> If the <code>dialogState</code> value is <code>ElicitSlot</code>, returns the name of the\n   *       slot for which Amazon Lex is eliciting a value. </p>\n   */\n  slotToElicit?: string;\n\n  /**\n   * <p>The text used to process the request.</p>\n   *          <p>If the input was an audio stream, the <code>inputTranscript</code> field contains the text\n   *       extracted from the audio stream. This is the text that is actually processed to recognize\n   *       intents and slot values. You can use this information to determine if Amazon Lex is correctly\n   *       processing the audio that you send.</p>\n   */\n  inputTranscript?: string;\n\n  /**\n   * <p>The prompt (or statement) to convey to the user. This is based on the bot configuration\n   *       and context. For example, if Amazon Lex did not understand the user intent, it sends the\n   *         <code>clarificationPrompt</code> configured for the bot. If the intent requires confirmation\n   *       before taking the fulfillment action, it sends the <code>confirmationPrompt</code>. Another\n   *       example: Suppose that the Lambda function successfully fulfilled the intent, and sent a message\n   *       to convey to the user. Then Amazon Lex sends that message in the response. </p>\n   */\n  audioStream?: Readable | ReadableStream | Blob;\n\n  /**\n   * <p>The version of the bot that responded to the conversation. You can use this information to\n   *       help determine if one version of a bot is performing better than another version.</p>\n   */\n  botVersion?: string;\n\n  /**\n   * <p>The unique identifier for the session.</p>\n   */\n  sessionId?: string;\n\n  /**\n   * <p>A list of active contexts for the session. A context can be set when an intent\n   *       is fulfilled or by calling the <code>PostContent</code>, <code>PostText</code>,\n   *       or <code>PutSession</code> operation.</p>\n   *          <p>You can use a context to control the intents that can follow up an intent,\n   *       or to modify the operation of your application.</p>\n   */\n  activeContexts?: __LazyJsonString | string;\n}\n\nexport namespace PostContentResponse {\n  export const filterSensitiveLog = (obj: PostContentResponse): any => ({\n    ...obj,\n    ...(obj.message && { message: SENSITIVE_STRING }),\n    ...(obj.activeContexts && { activeContexts: SENSITIVE_STRING }),\n  });\n}\n\n/**\n * <p>The input speech is too long.</p>\n */\nexport interface RequestTimeoutException extends __SmithyException, $MetadataBearer {\n  name: \"RequestTimeoutException\";\n  $fault: \"client\";\n  message?: string;\n}\n\nexport namespace RequestTimeoutException {\n  export const filterSensitiveLog = (obj: RequestTimeoutException): any => ({\n    ...obj,\n  });\n}\n\n/**\n * <p>The Content-Type header (<code>PostContent</code> API) has an invalid value. </p>\n */\nexport interface UnsupportedMediaTypeException extends __SmithyException, $MetadataBearer {\n  name: \"UnsupportedMediaTypeException\";\n  $fault: \"client\";\n  message?: string;\n}\n\nexport namespace UnsupportedMediaTypeException {\n  export const filterSensitiveLog = (obj: UnsupportedMediaTypeException): any => ({\n    ...obj,\n  });\n}\n\nexport interface PostTextRequest {\n  /**\n   * <p>The name of the Amazon Lex bot.</p>\n   */\n  botName: string | undefined;\n\n  /**\n   * <p>The alias of the Amazon Lex bot.</p>\n   */\n  botAlias: string | undefined;\n\n  /**\n   * <p>The ID of the client application user. Amazon Lex uses this to identify a user's conversation\n   *       with your bot. At runtime, each request must contain the <code>userID</code> field.</p>\n   *          <p>To decide the user ID to use for your application, consider the following factors.</p>\n   *          <ul>\n   *             <li>\n   *                <p>The <code>userID</code> field must not contain any personally identifiable information\n   *           of the user, for example, name, personal identification numbers, or other end user\n   *           personal information.</p>\n   *             </li>\n   *             <li>\n   *                <p>If you want a user to start a conversation on one device and continue on another\n   *           device, use a user-specific identifier.</p>\n   *             </li>\n   *             <li>\n   *                <p>If you want the same user to be able to have two independent conversations on two\n   *           different devices, choose a device-specific identifier.</p>\n   *             </li>\n   *             <li>\n   *                <p>A user can't have two independent conversations with two different versions of the\n   *           same bot. For example, a user can't have a conversation with the PROD and BETA versions of\n   *           the same bot. If you anticipate that a user will need to have conversation with two\n   *           different versions, for example, while testing, include the bot alias in the user ID to\n   *           separate the two conversations.</p>\n   *             </li>\n   *          </ul>\n   */\n  userId: string | undefined;\n\n  /**\n   * <p>Application-specific information passed between Amazon Lex and a client application.</p>\n   *          <p>For more information, see <a href=\"https://docs.aws.amazon.com/lex/latest/dg/context-mgmt.html#context-mgmt-session-attribs\">Setting Session\n   *         Attributes</a>.</p>\n   */\n  sessionAttributes?: { [key: string]: string };\n\n  /**\n   * <p>Request-specific information passed between Amazon Lex and a client application.</p>\n   *          <p>The namespace <code>x-amz-lex:</code> is reserved for special attributes. Don't create any\n   *       request attributes with the prefix <code>x-amz-lex:</code>.</p>\n   *          <p>For more information, see <a href=\"https://docs.aws.amazon.com/lex/latest/dg/context-mgmt.html#context-mgmt-request-attribs\">Setting Request\n   *         Attributes</a>.</p>\n   */\n  requestAttributes?: { [key: string]: string };\n\n  /**\n   * <p>The text that the user entered (Amazon Lex interprets this text).</p>\n   */\n  inputText: string | undefined;\n\n  /**\n   * <p>A list of contexts active for the request. A context can be activated when a previous\n   *       intent is fulfilled, or by including the context in the request,</p>\n   *          <p>If you don't specify a list of contexts, Amazon Lex will use the current list of contexts for\n   *       the session. If you specify an empty list, all contexts for the session are cleared.</p>\n   */\n  activeContexts?: ActiveContext[];\n}\n\nexport namespace PostTextRequest {\n  export const filterSensitiveLog = (obj: PostTextRequest): any => ({\n    ...obj,\n    ...(obj.sessionAttributes && { sessionAttributes: SENSITIVE_STRING }),\n    ...(obj.requestAttributes && { requestAttributes: SENSITIVE_STRING }),\n    ...(obj.inputText && { inputText: SENSITIVE_STRING }),\n    ...(obj.activeContexts && { activeContexts: SENSITIVE_STRING }),\n  });\n}\n\n/**\n * <p>Provides a score that indicates the confidence that Amazon Lex has that an intent is the one\n *       that satisfies the user's intent.</p>\n */\nexport interface IntentConfidence {\n  /**\n   * <p>A score that indicates how confident Amazon Lex is that an intent satisfies the user's intent.\n   *       Ranges between 0.00 and 1.00. Higher scores indicate higher confidence.</p>\n   */\n  score?: number;\n}\n\nexport namespace IntentConfidence {\n  export const filterSensitiveLog = (obj: IntentConfidence): any => ({\n    ...obj,\n  });\n}\n\n/**\n * <p>An intent that Amazon Lex suggests satisfies the user's intent. Includes the name of the\n *       intent, the confidence that Amazon Lex has that the user's intent is satisfied, and the slots\n *       defined for the intent.</p>\n */\nexport interface PredictedIntent {\n  /**\n   * <p>The name of the intent that Amazon Lex suggests satisfies the user's intent.</p>\n   */\n  intentName?: string;\n\n  /**\n   * <p>Indicates how confident Amazon Lex is that an intent satisfies the user's intent.</p>\n   */\n  nluIntentConfidence?: IntentConfidence;\n\n  /**\n   * <p>The slot and slot values associated with the predicted intent.</p>\n   */\n  slots?: { [key: string]: string };\n}\n\nexport namespace PredictedIntent {\n  export const filterSensitiveLog = (obj: PredictedIntent): any => ({\n    ...obj,\n    ...(obj.slots && { slots: SENSITIVE_STRING }),\n  });\n}\n\nexport enum ContentType {\n  GENERIC = \"application/vnd.amazonaws.card.generic\",\n}\n\n/**\n * <p>Represents an option to be shown on the client platform (Facebook, Slack, etc.)</p>\n */\nexport interface Button {\n  /**\n   * <p>Text that is visible to the user on the button.</p>\n   */\n  text: string | undefined;\n\n  /**\n   * <p>The value sent to Amazon Lex when a user chooses the button. For example, consider button\n   *       text \"NYC.\" When the user chooses the button, the value sent can be \"New York City.\"</p>\n   */\n  value: string | undefined;\n}\n\nexport namespace Button {\n  export const filterSensitiveLog = (obj: Button): any => ({\n    ...obj,\n  });\n}\n\n/**\n * <p>Represents an option rendered to the user when a prompt is shown. It could be an image, a\n *       button, a link, or text. </p>\n */\nexport interface GenericAttachment {\n  /**\n   * <p>The title of the option.</p>\n   */\n  title?: string;\n\n  /**\n   * <p>The subtitle shown below the title.</p>\n   */\n  subTitle?: string;\n\n  /**\n   * <p>The URL of an attachment to the response card.</p>\n   */\n  attachmentLinkUrl?: string;\n\n  /**\n   * <p>The URL of an image that is displayed to the user.</p>\n   */\n  imageUrl?: string;\n\n  /**\n   * <p>The list of options to show to the user.</p>\n   */\n  buttons?: Button[];\n}\n\nexport namespace GenericAttachment {\n  export const filterSensitiveLog = (obj: GenericAttachment): any => ({\n    ...obj,\n  });\n}\n\n/**\n * <p>If you configure a response card when creating your bots, Amazon Lex substitutes the session\n *       attributes and slot values that are available, and then returns it. The response card can also\n *       come from a Lambda function ( <code>dialogCodeHook</code> and <code>fulfillmentActivity</code>\n *       on an intent).</p>\n */\nexport interface ResponseCard {\n  /**\n   * <p>The version of the response card format.</p>\n   */\n  version?: string;\n\n  /**\n   * <p>The content type of the response.</p>\n   */\n  contentType?: ContentType | string;\n\n  /**\n   * <p>An array of attachment objects representing options.</p>\n   */\n  genericAttachments?: GenericAttachment[];\n}\n\nexport namespace ResponseCard {\n  export const filterSensitiveLog = (obj: ResponseCard): any => ({\n    ...obj,\n  });\n}\n\n/**\n * <p>The sentiment expressed in an utterance.</p>\n *          <p>When the bot is configured to send utterances to Amazon Comprehend for sentiment analysis,\n *       this field structure contains the result of the analysis.</p>\n */\nexport interface SentimentResponse {\n  /**\n   * <p>The inferred sentiment that Amazon Comprehend has the highest confidence in.</p>\n   */\n  sentimentLabel?: string;\n\n  /**\n   * <p>The likelihood that the sentiment was correctly inferred.</p>\n   */\n  sentimentScore?: string;\n}\n\nexport namespace SentimentResponse {\n  export const filterSensitiveLog = (obj: SentimentResponse): any => ({\n    ...obj,\n  });\n}\n\nexport interface PostTextResponse {\n  /**\n   * <p>The current user intent that Amazon Lex is aware of.</p>\n   */\n  intentName?: string;\n\n  /**\n   * <p>Provides a score that indicates how confident Amazon Lex is that the returned intent is the one\n   *       that matches the user's intent. The score is between 0.0 and 1.0. For more information, see\n   *         <a href=\"https://docs.aws.amazon.com/lex/latest/dg/confidence-scores.html\">Confidence\n   *         Scores</a>.</p>\n   *          <p>The score is a relative score, not an absolute score. The score may change based on\n   *       improvements to Amazon Lex.</p>\n   */\n  nluIntentConfidence?: IntentConfidence;\n\n  /**\n   * <p>One to four alternative intents that may be applicable to the user's intent.</p>\n   *          <p>Each alternative includes a score that indicates how confident Amazon Lex is that the intent\n   *       matches the user's intent. The intents are sorted by the confidence score.</p>\n   */\n  alternativeIntents?: PredictedIntent[];\n\n  /**\n   * <p> The intent slots that Amazon Lex detected from the user input in the conversation. </p>\n   *          <p>Amazon Lex creates a resolution list containing likely values for a slot. The value that it\n   *       returns is determined by the <code>valueSelectionStrategy</code> selected when the slot type\n   *       was created or updated. If <code>valueSelectionStrategy</code> is set to\n   *         <code>ORIGINAL_VALUE</code>, the value provided by the user is returned, if the user value\n   *       is similar to the slot values. If <code>valueSelectionStrategy</code> is set to\n   *         <code>TOP_RESOLUTION</code> Amazon Lex returns the first value in the resolution list or, if\n   *       there is no resolution list, null. If you don't specify a <code>valueSelectionStrategy</code>,\n   *       the default is <code>ORIGINAL_VALUE</code>.</p>\n   */\n  slots?: { [key: string]: string };\n\n  /**\n   * <p>A map of key-value pairs representing the session-specific context information.</p>\n   */\n  sessionAttributes?: { [key: string]: string };\n\n  /**\n   * <p>The message to convey to the user. The message can come from the bot's configuration or\n   *       from a Lambda function.</p>\n   *          <p>If the intent is not configured with a Lambda function, or if the Lambda function returned\n   *         <code>Delegate</code> as the <code>dialogAction.type</code> its response, Amazon Lex decides on\n   *       the next course of action and selects an appropriate message from the bot's configuration\n   *       based on the current interaction context. For example, if Amazon Lex isn't able to understand user\n   *       input, it uses a clarification prompt message.</p>\n   *          <p>When you create an intent you can assign messages to groups. When messages are assigned to\n   *       groups Amazon Lex returns one message from each group in the response. The message field is an\n   *       escaped JSON string containing the messages. For more information about the structure of the\n   *       JSON string returned, see <a>msg-prompts-formats</a>.</p>\n   *          <p>If the Lambda function returns a message, Amazon Lex passes it to the client in its\n   *       response.</p>\n   */\n  message?: string;\n\n  /**\n   * <p>The sentiment expressed in and utterance.</p>\n   *          <p>When the bot is configured to send utterances to Amazon Comprehend for sentiment analysis,\n   *       this field contains the result of the analysis.</p>\n   */\n  sentimentResponse?: SentimentResponse;\n\n  /**\n   * <p>The format of the response message. One of the following values:</p>\n   *          <ul>\n   *             <li>\n   *                <p>\n   *                   <code>PlainText</code> - The message contains plain UTF-8 text.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>CustomPayload</code> - The message is a custom format defined by the Lambda\n   *           function.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>SSML</code> - The message contains text formatted for voice output.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>Composite</code> - The message contains an escaped JSON object containing one or\n   *           more messages from the groups that messages were assigned to when the intent was\n   *           created.</p>\n   *             </li>\n   *          </ul>\n   */\n  messageFormat?: MessageFormatType | string;\n\n  /**\n   * <p> Identifies the current state of the user interaction. Amazon Lex returns one of the following\n   *       values as <code>dialogState</code>. The client can optionally use this information to\n   *       customize the user interface. </p>\n   *          <ul>\n   *             <li>\n   *                <p>\n   *                   <code>ElicitIntent</code> - Amazon Lex wants to elicit user intent. </p>\n   *                <p>For example, a user might utter an intent (\"I want to order a pizza\"). If Amazon Lex cannot\n   *           infer the user intent from this utterance, it will return this dialogState.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>ConfirmIntent</code> - Amazon Lex is expecting a \"yes\" or \"no\" response. </p>\n   *                <p> For example, Amazon Lex wants user confirmation before fulfilling an intent. </p>\n   *                <p>Instead of a simple \"yes\" or \"no,\" a user might respond with additional information.\n   *           For example, \"yes, but make it thick crust pizza\" or \"no, I want to order a drink\".\n   *           Amazon Lex can process such additional information (in these examples, update the crust\n   *           type slot value, or change intent from OrderPizza to OrderDrink).</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>ElicitSlot</code> - Amazon Lex is expecting a slot value for the current intent. </p>\n   *                <p>For example, suppose that in the response Amazon Lex sends this message: \"What size pizza\n   *           would you like?\". A user might reply with the slot value (e.g., \"medium\"). The user might\n   *           also provide additional information in the response (e.g., \"medium thick crust pizza\").\n   *           Amazon Lex can process such additional information appropriately. </p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>Fulfilled</code> - Conveys that the Lambda function configured for the intent has\n   *           successfully fulfilled the intent. </p>\n   *\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>ReadyForFulfillment</code> - Conveys that the client has to fulfill the intent.\n   *         </p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>Failed</code> - Conveys that the conversation with the user failed. </p>\n   *                <p> This can happen for various reasons including that the user did not provide an\n   *           appropriate response to prompts from the service (you can configure how many times Amazon Lex\n   *           can prompt a user for specific information), or the Lambda function failed to fulfill the\n   *           intent. </p>\n   *             </li>\n   *          </ul>\n   */\n  dialogState?: DialogState | string;\n\n  /**\n   * <p>If the <code>dialogState</code> value is <code>ElicitSlot</code>, returns the name of the\n   *       slot for which Amazon Lex is eliciting a value. </p>\n   */\n  slotToElicit?: string;\n\n  /**\n   * <p>Represents the options that the user has to respond to the current prompt. Response Card\n   *       can come from the bot configuration (in the Amazon Lex console, choose the settings button next\n   *       to a slot) or from a code hook (Lambda function). </p>\n   */\n  responseCard?: ResponseCard;\n\n  /**\n   * <p>A unique identifier for the session.</p>\n   */\n  sessionId?: string;\n\n  /**\n   * <p>The version of the bot that responded to the conversation. You can use this information to\n   *       help determine if one version of a bot is performing better than another version.</p>\n   */\n  botVersion?: string;\n\n  /**\n   * <p>A list of active contexts for the session. A context can be set when an intent\n   *       is fulfilled or by calling the <code>PostContent</code>, <code>PostText</code>,\n   *       or <code>PutSession</code> operation.</p>\n   *          <p>You can use a context to control the intents that can follow up an intent,\n   *       or to modify the operation of your application.</p>\n   */\n  activeContexts?: ActiveContext[];\n}\n\nexport namespace PostTextResponse {\n  export const filterSensitiveLog = (obj: PostTextResponse): any => ({\n    ...obj,\n    ...(obj.alternativeIntents && {\n      alternativeIntents: obj.alternativeIntents.map((item) => PredictedIntent.filterSensitiveLog(item)),\n    }),\n    ...(obj.slots && { slots: SENSITIVE_STRING }),\n    ...(obj.sessionAttributes && { sessionAttributes: SENSITIVE_STRING }),\n    ...(obj.message && { message: SENSITIVE_STRING }),\n    ...(obj.activeContexts && { activeContexts: SENSITIVE_STRING }),\n  });\n}\n\nexport interface PutSessionRequest {\n  /**\n   * <p>The name of the bot that contains the session data.</p>\n   */\n  botName: string | undefined;\n\n  /**\n   * <p>The alias in use for the bot that contains the session data.</p>\n   */\n  botAlias: string | undefined;\n\n  /**\n   * <p>The ID of the client application user. Amazon Lex uses this to identify a user's conversation\n   *       with your bot. </p>\n   */\n  userId: string | undefined;\n\n  /**\n   * <p>Map of key/value pairs representing the session-specific context information. It contains\n   *       application information passed between Amazon Lex and a client application.</p>\n   */\n  sessionAttributes?: { [key: string]: string };\n\n  /**\n   * <p>Sets the next action that the bot should take to fulfill the conversation.</p>\n   */\n  dialogAction?: DialogAction;\n\n  /**\n   * <p>A summary of the recent intents for the bot. You can use the intent summary view to set a\n   *       checkpoint label on an intent and modify attributes of intents. You can also use it to remove\n   *       or add intent summary objects to the list.</p>\n   *          <p>An intent that you modify or add to the list must make sense for the bot. For example, the\n   *       intent name must be valid for the bot. You must provide valid values for:</p>\n   *          <ul>\n   *             <li>\n   *                <p>\n   *                   <code>intentName</code>\n   *                </p>\n   *             </li>\n   *             <li>\n   *                <p>slot names</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>slotToElict</code>\n   *                </p>\n   *             </li>\n   *          </ul>\n   *          <p>If you send the <code>recentIntentSummaryView</code> parameter in a\n   *         <code>PutSession</code> request, the contents of the new summary view replaces the old\n   *       summary view. For example, if a <code>GetSession</code> request returns three intents in the\n   *       summary view and you call <code>PutSession</code> with one intent in the summary view, the\n   *       next call to <code>GetSession</code> will only return one intent.</p>\n   */\n  recentIntentSummaryView?: IntentSummary[];\n\n  /**\n   * <p>The message that Amazon Lex returns in the response can be either text or speech based\n   *       depending on the value of this field.</p>\n   *          <ul>\n   *             <li>\n   *                <p>If the value is <code>text/plain; charset=utf-8</code>, Amazon Lex returns text in the\n   *           response.</p>\n   *             </li>\n   *             <li>\n   *                <p>If the value begins with <code>audio/</code>, Amazon Lex returns speech in the response.\n   *           Amazon Lex uses Amazon Polly to generate the speech in the configuration that you specify. For\n   *           example, if you specify <code>audio/mpeg</code> as the value, Amazon Lex returns speech in the\n   *           MPEG format.</p>\n   *             </li>\n   *             <li>\n   *                <p>If the value is <code>audio/pcm</code>, the speech is returned as\n   *             <code>audio/pcm</code> in 16-bit, little endian format.</p>\n   *             </li>\n   *             <li>\n   *                <p>The following are the accepted values:</p>\n   *                <ul>\n   *                   <li>\n   *                      <p>\n   *                         <code>audio/mpeg</code>\n   *                      </p>\n   *                   </li>\n   *                   <li>\n   *                      <p>\n   *                         <code>audio/ogg</code>\n   *                      </p>\n   *                   </li>\n   *                   <li>\n   *                      <p>\n   *                         <code>audio/pcm</code>\n   *                      </p>\n   *                   </li>\n   *                   <li>\n   *                      <p>\n   *                         <code>audio/*</code> (defaults to mpeg)</p>\n   *                   </li>\n   *                   <li>\n   *                      <p>\n   *                         <code>text/plain; charset=utf-8</code>\n   *                      </p>\n   *                   </li>\n   *                </ul>\n   *             </li>\n   *          </ul>\n   */\n  accept?: string;\n\n  /**\n   * <p>A list of contexts active for the request. A context can be activated when a previous\n   *       intent is fulfilled, or by including the context in the request,</p>\n   *          <p>If you don't specify a list of contexts, Amazon Lex will use the current list of contexts for\n   *       the session. If you specify an empty list, all contexts for the session are cleared.</p>\n   */\n  activeContexts?: ActiveContext[];\n}\n\nexport namespace PutSessionRequest {\n  export const filterSensitiveLog = (obj: PutSessionRequest): any => ({\n    ...obj,\n    ...(obj.sessionAttributes && { sessionAttributes: SENSITIVE_STRING }),\n    ...(obj.dialogAction && { dialogAction: DialogAction.filterSensitiveLog(obj.dialogAction) }),\n    ...(obj.recentIntentSummaryView && {\n      recentIntentSummaryView: obj.recentIntentSummaryView.map((item) => IntentSummary.filterSensitiveLog(item)),\n    }),\n    ...(obj.activeContexts && { activeContexts: SENSITIVE_STRING }),\n  });\n}\n\nexport interface PutSessionResponse {\n  /**\n   * <p>Content type as specified in the <code>Accept</code> HTTP header in the request.</p>\n   */\n  contentType?: string;\n\n  /**\n   * <p>The name of the current intent.</p>\n   */\n  intentName?: string;\n\n  /**\n   * <p>Map of zero or more intent slots Amazon Lex detected from the user input during the\n   *       conversation.</p>\n   *          <p>Amazon Lex creates a resolution list containing likely values for a slot. The value that it\n   *       returns is determined by the <code>valueSelectionStrategy</code> selected when the slot type\n   *       was created or updated. If <code>valueSelectionStrategy</code> is set to\n   *         <code>ORIGINAL_VALUE</code>, the value provided by the user is returned, if the user value\n   *       is similar to the slot values. If <code>valueSelectionStrategy</code> is set to\n   *         <code>TOP_RESOLUTION</code> Amazon Lex returns the first value in the resolution list or, if\n   *       there is no resolution list, null. If you don't specify a <code>valueSelectionStrategy</code>\n   *       the default is <code>ORIGINAL_VALUE</code>. </p>\n   */\n  slots?: __LazyJsonString | string;\n\n  /**\n   * <p>Map of key/value pairs representing session-specific context information.</p>\n   */\n  sessionAttributes?: __LazyJsonString | string;\n\n  /**\n   * <p>The next message that should be presented to the user.</p>\n   */\n  message?: string;\n\n  /**\n   * <p>The format of the response message. One of the following values:</p>\n   *          <ul>\n   *             <li>\n   *                <p>\n   *                   <code>PlainText</code> - The message contains plain UTF-8 text.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>CustomPayload</code> - The message is a custom format for the client.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>SSML</code> - The message contains text formatted for voice output.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>Composite</code> - The message contains an escaped JSON object containing one or\n   *           more messages from the groups that messages were assigned to when the intent was\n   *           created.</p>\n   *             </li>\n   *          </ul>\n   */\n  messageFormat?: MessageFormatType | string;\n\n  /**\n   * <p></p>\n   *          <ul>\n   *             <li>\n   *                <p>\n   *                   <code>ConfirmIntent</code> - Amazon Lex is expecting a \"yes\" or \"no\" response to confirm\n   *           the intent before fulfilling an intent.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>ElicitIntent</code> - Amazon Lex wants to elicit the user's intent.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>ElicitSlot</code> - Amazon Lex is expecting the value of a slot for the current\n   *           intent.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>Failed</code> - Conveys that the conversation with the user has failed. This can\n   *           happen for various reasons, including the user does not provide an appropriate response to\n   *           prompts from the service, or if the Lambda function fails to fulfill the intent.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>Fulfilled</code> - Conveys that the Lambda function has sucessfully fulfilled the\n   *           intent.</p>\n   *             </li>\n   *             <li>\n   *                <p>\n   *                   <code>ReadyForFulfillment</code> - Conveys that the client has to fulfill the\n   *           intent.</p>\n   *             </li>\n   *          </ul>\n   */\n  dialogState?: DialogState | string;\n\n  /**\n   * <p>If the <code>dialogState</code> is <code>ElicitSlot</code>, returns the name of the slot\n   *       for which Amazon Lex is eliciting a value.</p>\n   */\n  slotToElicit?: string;\n\n  /**\n   * <p>The audio version of the message to convey to the user.</p>\n   */\n  audioStream?: Readable | ReadableStream | Blob;\n\n  /**\n   * <p>A unique identifier for the session.</p>\n   */\n  sessionId?: string;\n\n  /**\n   * <p>A list of active contexts for the session.</p>\n   */\n  activeContexts?: __LazyJsonString | string;\n}\n\nexport namespace PutSessionResponse {\n  export const filterSensitiveLog = (obj: PutSessionResponse): any => ({\n    ...obj,\n    ...(obj.message && { message: SENSITIVE_STRING }),\n    ...(obj.activeContexts && { activeContexts: SENSITIVE_STRING }),\n  });\n}\n","/*\n * Copyright 2017-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\nimport {\n\tInteractionsProvider,\n\tInteractionsOptions,\n\tInteractionsResponse,\n} from '../types';\n\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\n\nconst logger = new Logger('AbstractInteractionsProvider');\n\nexport abstract class AbstractInteractionsProvider\n\timplements InteractionsProvider {\n\tprotected _config: InteractionsOptions;\n\n\tconstructor(options: InteractionsOptions = {}) {\n\t\tthis._config = options;\n\t}\n\n\tconfigure(config: InteractionsOptions = {}): InteractionsOptions {\n\t\tthis._config = { ...this._config, ...config };\n\n\t\tlogger.debug(`configure ${this.getProviderName()}`, this._config);\n\n\t\treturn this.options;\n\t}\n\n\tgetCategory() {\n\t\treturn 'Interactions';\n\t}\n\n\tabstract getProviderName(): string;\n\n\tprotected get options(): InteractionsOptions {\n\t\treturn { ...this._config };\n\t}\n\n\tpublic abstract sendMessage(\n\t\tbotname: string,\n\t\tmessage: string | Object\n\t): Promise<object>;\n\n\tpublic abstract onComplete(\n\t\tbotname: string,\n\t\tcallback: (err: any, confirmation: InteractionsResponse) => void\n\t);\n}\n","import { RegionInfo, RegionInfoProvider } from \"@aws-sdk/types\";\n\n// Partition default templates\nconst AWS_TEMPLATE = \"runtime.lex.{region}.amazonaws.com\";\nconst AWS_CN_TEMPLATE = \"runtime.lex.{region}.amazonaws.com.cn\";\nconst AWS_ISO_TEMPLATE = \"runtime.lex.{region}.c2s.ic.gov\";\nconst AWS_ISO_B_TEMPLATE = \"runtime.lex.{region}.sc2s.sgov.gov\";\nconst AWS_US_GOV_TEMPLATE = \"runtime.lex.{region}.amazonaws.com\";\n\n// Partition regions\nconst AWS_REGIONS = new Set([\n  \"af-south-1\",\n  \"ap-east-1\",\n  \"ap-northeast-1\",\n  \"ap-northeast-2\",\n  \"ap-south-1\",\n  \"ap-southeast-1\",\n  \"ap-southeast-2\",\n  \"ca-central-1\",\n  \"eu-central-1\",\n  \"eu-north-1\",\n  \"eu-south-1\",\n  \"eu-west-1\",\n  \"eu-west-2\",\n  \"eu-west-3\",\n  \"me-south-1\",\n  \"sa-east-1\",\n  \"us-east-1\",\n  \"us-east-2\",\n  \"us-west-1\",\n  \"us-west-2\",\n]);\nconst AWS_CN_REGIONS = new Set([\"cn-north-1\", \"cn-northwest-1\"]);\nconst AWS_ISO_REGIONS = new Set([\"us-iso-east-1\"]);\nconst AWS_ISO_B_REGIONS = new Set([\"us-isob-east-1\"]);\nconst AWS_US_GOV_REGIONS = new Set([\"us-gov-east-1\", \"us-gov-west-1\"]);\n\nexport const defaultRegionInfoProvider: RegionInfoProvider = (region: string, options?: any) => {\n  let regionInfo: RegionInfo | undefined = undefined;\n  switch (region) {\n    // First, try to match exact region names.\n    case \"ap-northeast-1\":\n      regionInfo = {\n        hostname: \"runtime.lex.ap-northeast-1.amazonaws.com\",\n        partition: \"aws\",\n        signingService: \"lex\",\n      };\n      break;\n    case \"ap-southeast-1\":\n      regionInfo = {\n        hostname: \"runtime.lex.ap-southeast-1.amazonaws.com\",\n        partition: \"aws\",\n        signingService: \"lex\",\n      };\n      break;\n    case \"ap-southeast-2\":\n      regionInfo = {\n        hostname: \"runtime.lex.ap-southeast-2.amazonaws.com\",\n        partition: \"aws\",\n        signingService: \"lex\",\n      };\n      break;\n    case \"eu-central-1\":\n      regionInfo = {\n        hostname: \"runtime.lex.eu-central-1.amazonaws.com\",\n        partition: \"aws\",\n        signingService: \"lex\",\n      };\n      break;\n    case \"eu-west-1\":\n      regionInfo = {\n        hostname: \"runtime.lex.eu-west-1.amazonaws.com\",\n        partition: \"aws\",\n        signingService: \"lex\",\n      };\n      break;\n    case \"eu-west-2\":\n      regionInfo = {\n        hostname: \"runtime.lex.eu-west-2.amazonaws.com\",\n        partition: \"aws\",\n        signingService: \"lex\",\n      };\n      break;\n    case \"us-east-1\":\n      regionInfo = {\n        hostname: \"runtime.lex.us-east-1.amazonaws.com\",\n        partition: \"aws\",\n        signingService: \"lex\",\n      };\n      break;\n    case \"us-west-2\":\n      regionInfo = {\n        hostname: \"runtime.lex.us-west-2.amazonaws.com\",\n        partition: \"aws\",\n        signingService: \"lex\",\n      };\n      break;\n    // Next, try to match partition endpoints.\n    default:\n      if (AWS_REGIONS.has(region)) {\n        regionInfo = {\n          hostname: AWS_TEMPLATE.replace(\"{region}\", region),\n          partition: \"aws\",\n          signingService: \"lex\",\n        };\n      }\n      if (AWS_CN_REGIONS.has(region)) {\n        regionInfo = {\n          hostname: AWS_CN_TEMPLATE.replace(\"{region}\", region),\n          partition: \"aws-cn\",\n        };\n      }\n      if (AWS_ISO_REGIONS.has(region)) {\n        regionInfo = {\n          hostname: AWS_ISO_TEMPLATE.replace(\"{region}\", region),\n          partition: \"aws-iso\",\n        };\n      }\n      if (AWS_ISO_B_REGIONS.has(region)) {\n        regionInfo = {\n          hostname: AWS_ISO_B_TEMPLATE.replace(\"{region}\", region),\n          partition: \"aws-iso-b\",\n        };\n      }\n      if (AWS_US_GOV_REGIONS.has(region)) {\n        regionInfo = {\n          hostname: AWS_US_GOV_TEMPLATE.replace(\"{region}\", region),\n          partition: \"aws-us-gov\",\n        };\n      }\n      // Finally, assume it's an AWS partition endpoint.\n      if (regionInfo === undefined) {\n        regionInfo = {\n          hostname: AWS_TEMPLATE.replace(\"{region}\", region),\n          partition: \"aws\",\n          signingService: \"lex\",\n        };\n      }\n  }\n  return Promise.resolve({ signingService: \"lex\", ...regionInfo });\n};\n","import { defaultRegionInfoProvider } from \"./endpoints\";\nimport { Logger as __Logger } from \"@aws-sdk/types\";\nimport { parseUrl } from \"@aws-sdk/url-parser\";\n\n/**\n * @internal\n */\nexport const ClientSharedValues = {\n  apiVersion: \"2016-11-28\",\n  disableHostPrefix: false,\n  logger: {} as __Logger,\n  regionInfoProvider: defaultRegionInfoProvider,\n  serviceId: \"Lex Runtime Service\",\n  urlParser: parseUrl,\n};\n","import packageInfo from \"./package.json\";\n\nimport { Sha256 } from \"@aws-crypto/sha256-browser\";\nimport { FetchHttpHandler, streamCollector } from \"@aws-sdk/fetch-http-handler\";\nimport { invalidProvider } from \"@aws-sdk/invalid-dependency\";\nimport { DEFAULT_MAX_ATTEMPTS } from \"@aws-sdk/middleware-retry\";\nimport { fromBase64, toBase64 } from \"@aws-sdk/util-base64-browser\";\nimport { calculateBodyLength } from \"@aws-sdk/util-body-length-browser\";\nimport { defaultUserAgent } from \"@aws-sdk/util-user-agent-browser\";\nimport { fromUtf8, toUtf8 } from \"@aws-sdk/util-utf8-browser\";\nimport { ClientDefaults } from \"./LexRuntimeServiceClient\";\nimport { ClientSharedValues } from \"./runtimeConfig.shared\";\n\n/**\n * @internal\n */\nexport const ClientDefaultValues: Required<ClientDefaults> = {\n  ...ClientSharedValues,\n  runtime: \"browser\",\n  base64Decoder: fromBase64,\n  base64Encoder: toBase64,\n  bodyLengthChecker: calculateBodyLength,\n  credentialDefaultProvider: (_: unknown) => () => Promise.reject(new Error(\"Credential is missing\")),\n  defaultUserAgentProvider: defaultUserAgent({\n    serviceId: ClientSharedValues.serviceId,\n    clientVersion: packageInfo.version,\n  }),\n  maxAttempts: DEFAULT_MAX_ATTEMPTS,\n  region: invalidProvider(\"Region is missing\"),\n  requestHandler: new FetchHttpHandler(),\n  sha256: Sha256,\n  streamCollector,\n  utf8Decoder: fromUtf8,\n  utf8Encoder: toUtf8,\n};\n","import { DeleteSessionCommandInput, DeleteSessionCommandOutput } from \"./commands/DeleteSessionCommand\";\nimport { GetSessionCommandInput, GetSessionCommandOutput } from \"./commands/GetSessionCommand\";\nimport { PostContentCommandInput, PostContentCommandOutput } from \"./commands/PostContentCommand\";\nimport { PostTextCommandInput, PostTextCommandOutput } from \"./commands/PostTextCommand\";\nimport { PutSessionCommandInput, PutSessionCommandOutput } from \"./commands/PutSessionCommand\";\nimport { ClientDefaultValues as __ClientDefaultValues } from \"./runtimeConfig\";\nimport {\n  EndpointsInputConfig,\n  EndpointsResolvedConfig,\n  RegionInputConfig,\n  RegionResolvedConfig,\n  resolveEndpointsConfig,\n  resolveRegionConfig,\n} from \"@aws-sdk/config-resolver\";\nimport { getContentLengthPlugin } from \"@aws-sdk/middleware-content-length\";\nimport {\n  HostHeaderInputConfig,\n  HostHeaderResolvedConfig,\n  getHostHeaderPlugin,\n  resolveHostHeaderConfig,\n} from \"@aws-sdk/middleware-host-header\";\nimport { getLoggerPlugin } from \"@aws-sdk/middleware-logger\";\nimport { RetryInputConfig, RetryResolvedConfig, getRetryPlugin, resolveRetryConfig } from \"@aws-sdk/middleware-retry\";\nimport {\n  AwsAuthInputConfig,\n  AwsAuthResolvedConfig,\n  getAwsAuthPlugin,\n  resolveAwsAuthConfig,\n} from \"@aws-sdk/middleware-signing\";\nimport {\n  UserAgentInputConfig,\n  UserAgentResolvedConfig,\n  getUserAgentPlugin,\n  resolveUserAgentConfig,\n} from \"@aws-sdk/middleware-user-agent\";\nimport { HttpHandler as __HttpHandler } from \"@aws-sdk/protocol-http\";\nimport {\n  Client as __Client,\n  SmithyConfiguration as __SmithyConfiguration,\n  SmithyResolvedConfiguration as __SmithyResolvedConfiguration,\n} from \"@aws-sdk/smithy-client\";\nimport {\n  Provider,\n  RegionInfoProvider,\n  Credentials as __Credentials,\n  Decoder as __Decoder,\n  Encoder as __Encoder,\n  HashConstructor as __HashConstructor,\n  HttpHandlerOptions as __HttpHandlerOptions,\n  Logger as __Logger,\n  Provider as __Provider,\n  StreamCollector as __StreamCollector,\n  UrlParser as __UrlParser,\n  UserAgent as __UserAgent,\n} from \"@aws-sdk/types\";\n\nexport type ServiceInputTypes =\n  | DeleteSessionCommandInput\n  | GetSessionCommandInput\n  | PostContentCommandInput\n  | PostTextCommandInput\n  | PutSessionCommandInput;\n\nexport type ServiceOutputTypes =\n  | DeleteSessionCommandOutput\n  | GetSessionCommandOutput\n  | PostContentCommandOutput\n  | PostTextCommandOutput\n  | PutSessionCommandOutput;\n\nexport interface ClientDefaults extends Partial<__SmithyResolvedConfiguration<__HttpHandlerOptions>> {\n  /**\n   * The HTTP handler to use. Fetch in browser and Https in Nodejs.\n   */\n  requestHandler?: __HttpHandler;\n\n  /**\n   * A constructor for a class implementing the @aws-sdk/types.Hash interface\n   * that computes the SHA-256 HMAC or checksum of a string or binary buffer.\n   */\n  sha256?: __HashConstructor;\n\n  /**\n   * The function that will be used to convert strings into HTTP endpoints.\n   */\n  urlParser?: __UrlParser;\n\n  /**\n   * A function that can calculate the length of a request body.\n   */\n  bodyLengthChecker?: (body: any) => number | undefined;\n\n  /**\n   * A function that converts a stream into an array of bytes.\n   */\n  streamCollector?: __StreamCollector;\n\n  /**\n   * The function that will be used to convert a base64-encoded string to a byte array\n   */\n  base64Decoder?: __Decoder;\n\n  /**\n   * The function that will be used to convert binary data to a base64-encoded string\n   */\n  base64Encoder?: __Encoder;\n\n  /**\n   * The function that will be used to convert a UTF8-encoded string to a byte array\n   */\n  utf8Decoder?: __Decoder;\n\n  /**\n   * The function that will be used to convert binary data to a UTF-8 encoded string\n   */\n  utf8Encoder?: __Encoder;\n\n  /**\n   * The runtime environment\n   */\n  runtime?: string;\n\n  /**\n   * Disable dyanamically changing the endpoint of the client based on the hostPrefix\n   * trait of an operation.\n   */\n  disableHostPrefix?: boolean;\n\n  /**\n   * Unique service identifier.\n   * @internal\n   */\n  serviceId?: string;\n\n  /**\n   * Default credentials provider; Not available in browser runtime\n   */\n  credentialDefaultProvider?: (input: any) => __Provider<__Credentials>;\n\n  /**\n   * The AWS region to which this client will send requests\n   */\n  region?: string | __Provider<string>;\n\n  /**\n   * Value for how many times a request will be made at most in case of retry.\n   */\n  maxAttempts?: number | __Provider<number>;\n\n  /**\n   * Optional logger for logging debug/info/warn/error.\n   */\n  logger?: __Logger;\n\n  /**\n   * Fetch related hostname, signing name or signing region with given region.\n   */\n  regionInfoProvider?: RegionInfoProvider;\n\n  /**\n   * The provider populating default tracking information to be sent with `user-agent`, `x-amz-user-agent` header\n   * @internal\n   */\n  defaultUserAgentProvider?: Provider<__UserAgent>;\n}\n\nexport type LexRuntimeServiceClientConfig = Partial<__SmithyConfiguration<__HttpHandlerOptions>> &\n  ClientDefaults &\n  RegionInputConfig &\n  EndpointsInputConfig &\n  AwsAuthInputConfig &\n  RetryInputConfig &\n  HostHeaderInputConfig &\n  UserAgentInputConfig;\n\nexport type LexRuntimeServiceClientResolvedConfig = __SmithyResolvedConfiguration<__HttpHandlerOptions> &\n  Required<ClientDefaults> &\n  RegionResolvedConfig &\n  EndpointsResolvedConfig &\n  AwsAuthResolvedConfig &\n  RetryResolvedConfig &\n  HostHeaderResolvedConfig &\n  UserAgentResolvedConfig;\n\n/**\n * <p>Amazon Lex provides both build and runtime endpoints. Each endpoint provides a set of\n *       operations (API). Your conversational bot uses the runtime API to understand user utterances\n *       (user input text or voice). For example, suppose a user says \"I want pizza\", your bot sends\n *       this input to Amazon Lex using the runtime API. Amazon Lex recognizes that the user request is\n *       for the OrderPizza intent (one of the intents defined in the bot). Then Amazon Lex engages in\n *       user conversation on behalf of the bot to elicit required information (slot values, such as\n *       pizza size and crust type), and then performs fulfillment activity (that you configured when\n *       you created the bot). You use the build-time API to create and manage your Amazon Lex bot. For\n *       a list of build-time operations, see the build-time API, . </p>\n */\nexport class LexRuntimeServiceClient extends __Client<\n  __HttpHandlerOptions,\n  ServiceInputTypes,\n  ServiceOutputTypes,\n  LexRuntimeServiceClientResolvedConfig\n> {\n  readonly config: LexRuntimeServiceClientResolvedConfig;\n\n  constructor(configuration: LexRuntimeServiceClientConfig) {\n    let _config_0 = {\n      ...__ClientDefaultValues,\n      ...configuration,\n    };\n    let _config_1 = resolveRegionConfig(_config_0);\n    let _config_2 = resolveEndpointsConfig(_config_1);\n    let _config_3 = resolveAwsAuthConfig(_config_2);\n    let _config_4 = resolveRetryConfig(_config_3);\n    let _config_5 = resolveHostHeaderConfig(_config_4);\n    let _config_6 = resolveUserAgentConfig(_config_5);\n    super(_config_6);\n    this.config = _config_6;\n    this.middlewareStack.use(getAwsAuthPlugin(this.config));\n    this.middlewareStack.use(getRetryPlugin(this.config));\n    this.middlewareStack.use(getContentLengthPlugin(this.config));\n    this.middlewareStack.use(getHostHeaderPlugin(this.config));\n    this.middlewareStack.use(getLoggerPlugin(this.config));\n    this.middlewareStack.use(getUserAgentPlugin(this.config));\n  }\n\n  destroy(): void {\n    super.destroy();\n  }\n}\n","import { DeleteSessionCommandInput, DeleteSessionCommandOutput } from \"../commands/DeleteSessionCommand\";\nimport { GetSessionCommandInput, GetSessionCommandOutput } from \"../commands/GetSessionCommand\";\nimport { PostContentCommandInput, PostContentCommandOutput } from \"../commands/PostContentCommand\";\nimport { PostTextCommandInput, PostTextCommandOutput } from \"../commands/PostTextCommand\";\nimport { PutSessionCommandInput, PutSessionCommandOutput } from \"../commands/PutSessionCommand\";\nimport {\n  ActiveContext,\n  ActiveContextTimeToLive,\n  BadGatewayException,\n  BadRequestException,\n  Button,\n  ConflictException,\n  DependencyFailedException,\n  DialogAction,\n  GenericAttachment,\n  IntentConfidence,\n  IntentSummary,\n  InternalFailureException,\n  LimitExceededException,\n  LoopDetectedException,\n  NotAcceptableException,\n  NotFoundException,\n  PredictedIntent,\n  RequestTimeoutException,\n  ResponseCard,\n  SentimentResponse,\n  UnsupportedMediaTypeException,\n} from \"../models/models_0\";\nimport { HttpRequest as __HttpRequest, HttpResponse as __HttpResponse } from \"@aws-sdk/protocol-http\";\nimport {\n  LazyJsonString as __LazyJsonString,\n  SmithyException as __SmithyException,\n  extendedEncodeURIComponent as __extendedEncodeURIComponent,\n} from \"@aws-sdk/smithy-client\";\nimport {\n  Endpoint as __Endpoint,\n  MetadataBearer as __MetadataBearer,\n  ResponseMetadata as __ResponseMetadata,\n  SerdeContext as __SerdeContext,\n} from \"@aws-sdk/types\";\n\nexport const serializeAws_restJson1DeleteSessionCommand = async (\n  input: DeleteSessionCommandInput,\n  context: __SerdeContext\n): Promise<__HttpRequest> => {\n  const headers: any = {};\n  let resolvedPath = \"/bot/{botName}/alias/{botAlias}/user/{userId}/session\";\n  if (input.botName !== undefined) {\n    const labelValue: string = input.botName;\n    if (labelValue.length <= 0) {\n      throw new Error(\"Empty value provided for input HTTP label: botName.\");\n    }\n    resolvedPath = resolvedPath.replace(\"{botName}\", __extendedEncodeURIComponent(labelValue));\n  } else {\n    throw new Error(\"No value provided for input HTTP label: botName.\");\n  }\n  if (input.botAlias !== undefined) {\n    const labelValue: string = input.botAlias;\n    if (labelValue.length <= 0) {\n      throw new Error(\"Empty value provided for input HTTP label: botAlias.\");\n    }\n    resolvedPath = resolvedPath.replace(\"{botAlias}\", __extendedEncodeURIComponent(labelValue));\n  } else {\n    throw new Error(\"No value provided for input HTTP label: botAlias.\");\n  }\n  if (input.userId !== undefined) {\n    const labelValue: string = input.userId;\n    if (labelValue.length <= 0) {\n      throw new Error(\"Empty value provided for input HTTP label: userId.\");\n    }\n    resolvedPath = resolvedPath.replace(\"{userId}\", __extendedEncodeURIComponent(labelValue));\n  } else {\n    throw new Error(\"No value provided for input HTTP label: userId.\");\n  }\n  let body: any;\n  const { hostname, protocol = \"https\", port } = await context.endpoint();\n  return new __HttpRequest({\n    protocol,\n    hostname,\n    port,\n    method: \"DELETE\",\n    headers,\n    path: resolvedPath,\n    body,\n  });\n};\n\nexport const serializeAws_restJson1GetSessionCommand = async (\n  input: GetSessionCommandInput,\n  context: __SerdeContext\n): Promise<__HttpRequest> => {\n  const headers: any = {};\n  let resolvedPath = \"/bot/{botName}/alias/{botAlias}/user/{userId}/session\";\n  if (input.botName !== undefined) {\n    const labelValue: string = input.botName;\n    if (labelValue.length <= 0) {\n      throw new Error(\"Empty value provided for input HTTP label: botName.\");\n    }\n    resolvedPath = resolvedPath.replace(\"{botName}\", __extendedEncodeURIComponent(labelValue));\n  } else {\n    throw new Error(\"No value provided for input HTTP label: botName.\");\n  }\n  if (input.botAlias !== undefined) {\n    const labelValue: string = input.botAlias;\n    if (labelValue.length <= 0) {\n      throw new Error(\"Empty value provided for input HTTP label: botAlias.\");\n    }\n    resolvedPath = resolvedPath.replace(\"{botAlias}\", __extendedEncodeURIComponent(labelValue));\n  } else {\n    throw new Error(\"No value provided for input HTTP label: botAlias.\");\n  }\n  if (input.userId !== undefined) {\n    const labelValue: string = input.userId;\n    if (labelValue.length <= 0) {\n      throw new Error(\"Empty value provided for input HTTP label: userId.\");\n    }\n    resolvedPath = resolvedPath.replace(\"{userId}\", __extendedEncodeURIComponent(labelValue));\n  } else {\n    throw new Error(\"No value provided for input HTTP label: userId.\");\n  }\n  const query: any = {\n    ...(input.checkpointLabelFilter !== undefined && { checkpointLabelFilter: input.checkpointLabelFilter }),\n  };\n  let body: any;\n  const { hostname, protocol = \"https\", port } = await context.endpoint();\n  return new __HttpRequest({\n    protocol,\n    hostname,\n    port,\n    method: \"GET\",\n    headers,\n    path: resolvedPath,\n    query,\n    body,\n  });\n};\n\nexport const serializeAws_restJson1PostContentCommand = async (\n  input: PostContentCommandInput,\n  context: __SerdeContext\n): Promise<__HttpRequest> => {\n  const headers: any = {\n    \"content-type\": \"application/octet-stream\",\n    \"x-amz-content-sha256\": \"UNSIGNED-PAYLOAD\",\n    ...(isSerializableHeaderValue(input.sessionAttributes) && {\n      \"x-amz-lex-session-attributes\": Buffer.from(__LazyJsonString.fromObject(input.sessionAttributes!)).toString(\n        \"base64\"\n      ),\n    }),\n    ...(isSerializableHeaderValue(input.requestAttributes) && {\n      \"x-amz-lex-request-attributes\": Buffer.from(__LazyJsonString.fromObject(input.requestAttributes!)).toString(\n        \"base64\"\n      ),\n    }),\n    ...(isSerializableHeaderValue(input.contentType) && { \"content-type\": input.contentType! }),\n    ...(isSerializableHeaderValue(input.accept) && { accept: input.accept! }),\n    ...(isSerializableHeaderValue(input.activeContexts) && {\n      \"x-amz-lex-active-contexts\": Buffer.from(__LazyJsonString.fromObject(input.activeContexts!)).toString(\"base64\"),\n    }),\n  };\n  let resolvedPath = \"/bot/{botName}/alias/{botAlias}/user/{userId}/content\";\n  if (input.botName !== undefined) {\n    const labelValue: string = input.botName;\n    if (labelValue.length <= 0) {\n      throw new Error(\"Empty value provided for input HTTP label: botName.\");\n    }\n    resolvedPath = resolvedPath.replace(\"{botName}\", __extendedEncodeURIComponent(labelValue));\n  } else {\n    throw new Error(\"No value provided for input HTTP label: botName.\");\n  }\n  if (input.botAlias !== undefined) {\n    const labelValue: string = input.botAlias;\n    if (labelValue.length <= 0) {\n      throw new Error(\"Empty value provided for input HTTP label: botAlias.\");\n    }\n    resolvedPath = resolvedPath.replace(\"{botAlias}\", __extendedEncodeURIComponent(labelValue));\n  } else {\n    throw new Error(\"No value provided for input HTTP label: botAlias.\");\n  }\n  if (input.userId !== undefined) {\n    const labelValue: string = input.userId;\n    if (labelValue.length <= 0) {\n      throw new Error(\"Empty value provided for input HTTP label: userId.\");\n    }\n    resolvedPath = resolvedPath.replace(\"{userId}\", __extendedEncodeURIComponent(labelValue));\n  } else {\n    throw new Error(\"No value provided for input HTTP label: userId.\");\n  }\n  let body: any;\n  if (input.inputStream !== undefined) {\n    body = input.inputStream;\n  }\n  const { hostname, protocol = \"https\", port } = await context.endpoint();\n  return new __HttpRequest({\n    protocol,\n    hostname,\n    port,\n    method: \"POST\",\n    headers,\n    path: resolvedPath,\n    body,\n  });\n};\n\nexport const serializeAws_restJson1PostTextCommand = async (\n  input: PostTextCommandInput,\n  context: __SerdeContext\n): Promise<__HttpRequest> => {\n  const headers: any = {\n    \"content-type\": \"application/json\",\n  };\n  let resolvedPath = \"/bot/{botName}/alias/{botAlias}/user/{userId}/text\";\n  if (input.botName !== undefined) {\n    const labelValue: string = input.botName;\n    if (labelValue.length <= 0) {\n      throw new Error(\"Empty value provided for input HTTP label: botName.\");\n    }\n    resolvedPath = resolvedPath.replace(\"{botName}\", __extendedEncodeURIComponent(labelValue));\n  } else {\n    throw new Error(\"No value provided for input HTTP label: botName.\");\n  }\n  if (input.botAlias !== undefined) {\n    const labelValue: string = input.botAlias;\n    if (labelValue.length <= 0) {\n      throw new Error(\"Empty value provided for input HTTP label: botAlias.\");\n    }\n    resolvedPath = resolvedPath.replace(\"{botAlias}\", __extendedEncodeURIComponent(labelValue));\n  } else {\n    throw new Error(\"No value provided for input HTTP label: botAlias.\");\n  }\n  if (input.userId !== undefined) {\n    const labelValue: string = input.userId;\n    if (labelValue.length <= 0) {\n      throw new Error(\"Empty value provided for input HTTP label: userId.\");\n    }\n    resolvedPath = resolvedPath.replace(\"{userId}\", __extendedEncodeURIComponent(labelValue));\n  } else {\n    throw new Error(\"No value provided for input HTTP label: userId.\");\n  }\n  let body: any;\n  body = JSON.stringify({\n    ...(input.activeContexts !== undefined &&\n      input.activeContexts !== null && {\n        activeContexts: serializeAws_restJson1ActiveContextsList(input.activeContexts, context),\n      }),\n    ...(input.inputText !== undefined && input.inputText !== null && { inputText: input.inputText }),\n    ...(input.requestAttributes !== undefined &&\n      input.requestAttributes !== null && {\n        requestAttributes: serializeAws_restJson1StringMap(input.requestAttributes, context),\n      }),\n    ...(input.sessionAttributes !== undefined &&\n      input.sessionAttributes !== null && {\n        sessionAttributes: serializeAws_restJson1StringMap(input.sessionAttributes, context),\n      }),\n  });\n  const { hostname, protocol = \"https\", port } = await context.endpoint();\n  return new __HttpRequest({\n    protocol,\n    hostname,\n    port,\n    method: \"POST\",\n    headers,\n    path: resolvedPath,\n    body,\n  });\n};\n\nexport const serializeAws_restJson1PutSessionCommand = async (\n  input: PutSessionCommandInput,\n  context: __SerdeContext\n): Promise<__HttpRequest> => {\n  const headers: any = {\n    \"content-type\": \"application/json\",\n    ...(isSerializableHeaderValue(input.accept) && { accept: input.accept! }),\n  };\n  let resolvedPath = \"/bot/{botName}/alias/{botAlias}/user/{userId}/session\";\n  if (input.botName !== undefined) {\n    const labelValue: string = input.botName;\n    if (labelValue.length <= 0) {\n      throw new Error(\"Empty value provided for input HTTP label: botName.\");\n    }\n    resolvedPath = resolvedPath.replace(\"{botName}\", __extendedEncodeURIComponent(labelValue));\n  } else {\n    throw new Error(\"No value provided for input HTTP label: botName.\");\n  }\n  if (input.botAlias !== undefined) {\n    const labelValue: string = input.botAlias;\n    if (labelValue.length <= 0) {\n      throw new Error(\"Empty value provided for input HTTP label: botAlias.\");\n    }\n    resolvedPath = resolvedPath.replace(\"{botAlias}\", __extendedEncodeURIComponent(labelValue));\n  } else {\n    throw new Error(\"No value provided for input HTTP label: botAlias.\");\n  }\n  if (input.userId !== undefined) {\n    const labelValue: string = input.userId;\n    if (labelValue.length <= 0) {\n      throw new Error(\"Empty value provided for input HTTP label: userId.\");\n    }\n    resolvedPath = resolvedPath.replace(\"{userId}\", __extendedEncodeURIComponent(labelValue));\n  } else {\n    throw new Error(\"No value provided for input HTTP label: userId.\");\n  }\n  let body: any;\n  body = JSON.stringify({\n    ...(input.activeContexts !== undefined &&\n      input.activeContexts !== null && {\n        activeContexts: serializeAws_restJson1ActiveContextsList(input.activeContexts, context),\n      }),\n    ...(input.dialogAction !== undefined &&\n      input.dialogAction !== null && { dialogAction: serializeAws_restJson1DialogAction(input.dialogAction, context) }),\n    ...(input.recentIntentSummaryView !== undefined &&\n      input.recentIntentSummaryView !== null && {\n        recentIntentSummaryView: serializeAws_restJson1IntentSummaryList(input.recentIntentSummaryView, context),\n      }),\n    ...(input.sessionAttributes !== undefined &&\n      input.sessionAttributes !== null && {\n        sessionAttributes: serializeAws_restJson1StringMap(input.sessionAttributes, context),\n      }),\n  });\n  const { hostname, protocol = \"https\", port } = await context.endpoint();\n  return new __HttpRequest({\n    protocol,\n    hostname,\n    port,\n    method: \"POST\",\n    headers,\n    path: resolvedPath,\n    body,\n  });\n};\n\nexport const deserializeAws_restJson1DeleteSessionCommand = async (\n  output: __HttpResponse,\n  context: __SerdeContext\n): Promise<DeleteSessionCommandOutput> => {\n  if (output.statusCode !== 200 && output.statusCode >= 300) {\n    return deserializeAws_restJson1DeleteSessionCommandError(output, context);\n  }\n  const contents: DeleteSessionCommandOutput = {\n    $metadata: deserializeMetadata(output),\n    botAlias: undefined,\n    botName: undefined,\n    sessionId: undefined,\n    userId: undefined,\n  };\n  const data: any = await parseBody(output.body, context);\n  if (data.botAlias !== undefined && data.botAlias !== null) {\n    contents.botAlias = data.botAlias;\n  }\n  if (data.botName !== undefined && data.botName !== null) {\n    contents.botName = data.botName;\n  }\n  if (data.sessionId !== undefined && data.sessionId !== null) {\n    contents.sessionId = data.sessionId;\n  }\n  if (data.userId !== undefined && data.userId !== null) {\n    contents.userId = data.userId;\n  }\n  return Promise.resolve(contents);\n};\n\nconst deserializeAws_restJson1DeleteSessionCommandError = async (\n  output: __HttpResponse,\n  context: __SerdeContext\n): Promise<DeleteSessionCommandOutput> => {\n  const parsedOutput: any = {\n    ...output,\n    body: await parseBody(output.body, context),\n  };\n  let response: __SmithyException & __MetadataBearer & { [key: string]: any };\n  let errorCode: string = \"UnknownError\";\n  errorCode = loadRestJsonErrorCode(output, parsedOutput.body);\n  switch (errorCode) {\n    case \"BadRequestException\":\n    case \"com.amazonaws.lexruntimeservice#BadRequestException\":\n      response = {\n        ...(await deserializeAws_restJson1BadRequestExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"ConflictException\":\n    case \"com.amazonaws.lexruntimeservice#ConflictException\":\n      response = {\n        ...(await deserializeAws_restJson1ConflictExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"InternalFailureException\":\n    case \"com.amazonaws.lexruntimeservice#InternalFailureException\":\n      response = {\n        ...(await deserializeAws_restJson1InternalFailureExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"LimitExceededException\":\n    case \"com.amazonaws.lexruntimeservice#LimitExceededException\":\n      response = {\n        ...(await deserializeAws_restJson1LimitExceededExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"NotFoundException\":\n    case \"com.amazonaws.lexruntimeservice#NotFoundException\":\n      response = {\n        ...(await deserializeAws_restJson1NotFoundExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    default:\n      const parsedBody = parsedOutput.body;\n      errorCode = parsedBody.code || parsedBody.Code || errorCode;\n      response = {\n        ...parsedBody,\n        name: `${errorCode}`,\n        message: parsedBody.message || parsedBody.Message || errorCode,\n        $fault: \"client\",\n        $metadata: deserializeMetadata(output),\n      } as any;\n  }\n  const message = response.message || response.Message || errorCode;\n  response.message = message;\n  delete response.Message;\n  return Promise.reject(Object.assign(new Error(message), response));\n};\n\nexport const deserializeAws_restJson1GetSessionCommand = async (\n  output: __HttpResponse,\n  context: __SerdeContext\n): Promise<GetSessionCommandOutput> => {\n  if (output.statusCode !== 200 && output.statusCode >= 300) {\n    return deserializeAws_restJson1GetSessionCommandError(output, context);\n  }\n  const contents: GetSessionCommandOutput = {\n    $metadata: deserializeMetadata(output),\n    activeContexts: undefined,\n    dialogAction: undefined,\n    recentIntentSummaryView: undefined,\n    sessionAttributes: undefined,\n    sessionId: undefined,\n  };\n  const data: any = await parseBody(output.body, context);\n  if (data.activeContexts !== undefined && data.activeContexts !== null) {\n    contents.activeContexts = deserializeAws_restJson1ActiveContextsList(data.activeContexts, context);\n  }\n  if (data.dialogAction !== undefined && data.dialogAction !== null) {\n    contents.dialogAction = deserializeAws_restJson1DialogAction(data.dialogAction, context);\n  }\n  if (data.recentIntentSummaryView !== undefined && data.recentIntentSummaryView !== null) {\n    contents.recentIntentSummaryView = deserializeAws_restJson1IntentSummaryList(data.recentIntentSummaryView, context);\n  }\n  if (data.sessionAttributes !== undefined && data.sessionAttributes !== null) {\n    contents.sessionAttributes = deserializeAws_restJson1StringMap(data.sessionAttributes, context);\n  }\n  if (data.sessionId !== undefined && data.sessionId !== null) {\n    contents.sessionId = data.sessionId;\n  }\n  return Promise.resolve(contents);\n};\n\nconst deserializeAws_restJson1GetSessionCommandError = async (\n  output: __HttpResponse,\n  context: __SerdeContext\n): Promise<GetSessionCommandOutput> => {\n  const parsedOutput: any = {\n    ...output,\n    body: await parseBody(output.body, context),\n  };\n  let response: __SmithyException & __MetadataBearer & { [key: string]: any };\n  let errorCode: string = \"UnknownError\";\n  errorCode = loadRestJsonErrorCode(output, parsedOutput.body);\n  switch (errorCode) {\n    case \"BadRequestException\":\n    case \"com.amazonaws.lexruntimeservice#BadRequestException\":\n      response = {\n        ...(await deserializeAws_restJson1BadRequestExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"InternalFailureException\":\n    case \"com.amazonaws.lexruntimeservice#InternalFailureException\":\n      response = {\n        ...(await deserializeAws_restJson1InternalFailureExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"LimitExceededException\":\n    case \"com.amazonaws.lexruntimeservice#LimitExceededException\":\n      response = {\n        ...(await deserializeAws_restJson1LimitExceededExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"NotFoundException\":\n    case \"com.amazonaws.lexruntimeservice#NotFoundException\":\n      response = {\n        ...(await deserializeAws_restJson1NotFoundExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    default:\n      const parsedBody = parsedOutput.body;\n      errorCode = parsedBody.code || parsedBody.Code || errorCode;\n      response = {\n        ...parsedBody,\n        name: `${errorCode}`,\n        message: parsedBody.message || parsedBody.Message || errorCode,\n        $fault: \"client\",\n        $metadata: deserializeMetadata(output),\n      } as any;\n  }\n  const message = response.message || response.Message || errorCode;\n  response.message = message;\n  delete response.Message;\n  return Promise.reject(Object.assign(new Error(message), response));\n};\n\nexport const deserializeAws_restJson1PostContentCommand = async (\n  output: __HttpResponse,\n  context: __SerdeContext\n): Promise<PostContentCommandOutput> => {\n  if (output.statusCode !== 200 && output.statusCode >= 300) {\n    return deserializeAws_restJson1PostContentCommandError(output, context);\n  }\n  const contents: PostContentCommandOutput = {\n    $metadata: deserializeMetadata(output),\n    activeContexts: undefined,\n    alternativeIntents: undefined,\n    audioStream: undefined,\n    botVersion: undefined,\n    contentType: undefined,\n    dialogState: undefined,\n    inputTranscript: undefined,\n    intentName: undefined,\n    message: undefined,\n    messageFormat: undefined,\n    nluIntentConfidence: undefined,\n    sentimentResponse: undefined,\n    sessionAttributes: undefined,\n    sessionId: undefined,\n    slotToElicit: undefined,\n    slots: undefined,\n  };\n  if (output.headers[\"content-type\"] !== undefined) {\n    contents.contentType = output.headers[\"content-type\"];\n  }\n  if (output.headers[\"x-amz-lex-intent-name\"] !== undefined) {\n    contents.intentName = output.headers[\"x-amz-lex-intent-name\"];\n  }\n  if (output.headers[\"x-amz-lex-nlu-intent-confidence\"] !== undefined) {\n    contents.nluIntentConfidence = new __LazyJsonString(\n      Buffer.from(output.headers[\"x-amz-lex-nlu-intent-confidence\"], \"base64\").toString(\"ascii\")\n    );\n  }\n  if (output.headers[\"x-amz-lex-alternative-intents\"] !== undefined) {\n    contents.alternativeIntents = new __LazyJsonString(\n      Buffer.from(output.headers[\"x-amz-lex-alternative-intents\"], \"base64\").toString(\"ascii\")\n    );\n  }\n  if (output.headers[\"x-amz-lex-slots\"] !== undefined) {\n    contents.slots = new __LazyJsonString(Buffer.from(output.headers[\"x-amz-lex-slots\"], \"base64\").toString(\"ascii\"));\n  }\n  if (output.headers[\"x-amz-lex-session-attributes\"] !== undefined) {\n    contents.sessionAttributes = new __LazyJsonString(\n      Buffer.from(output.headers[\"x-amz-lex-session-attributes\"], \"base64\").toString(\"ascii\")\n    );\n  }\n  if (output.headers[\"x-amz-lex-sentiment\"] !== undefined) {\n    contents.sentimentResponse = output.headers[\"x-amz-lex-sentiment\"];\n  }\n  if (output.headers[\"x-amz-lex-message\"] !== undefined) {\n    contents.message = output.headers[\"x-amz-lex-message\"];\n  }\n  if (output.headers[\"x-amz-lex-message-format\"] !== undefined) {\n    contents.messageFormat = output.headers[\"x-amz-lex-message-format\"];\n  }\n  if (output.headers[\"x-amz-lex-dialog-state\"] !== undefined) {\n    contents.dialogState = output.headers[\"x-amz-lex-dialog-state\"];\n  }\n  if (output.headers[\"x-amz-lex-slot-to-elicit\"] !== undefined) {\n    contents.slotToElicit = output.headers[\"x-amz-lex-slot-to-elicit\"];\n  }\n  if (output.headers[\"x-amz-lex-input-transcript\"] !== undefined) {\n    contents.inputTranscript = output.headers[\"x-amz-lex-input-transcript\"];\n  }\n  if (output.headers[\"x-amz-lex-bot-version\"] !== undefined) {\n    contents.botVersion = output.headers[\"x-amz-lex-bot-version\"];\n  }\n  if (output.headers[\"x-amz-lex-session-id\"] !== undefined) {\n    contents.sessionId = output.headers[\"x-amz-lex-session-id\"];\n  }\n  if (output.headers[\"x-amz-lex-active-contexts\"] !== undefined) {\n    contents.activeContexts = new __LazyJsonString(\n      Buffer.from(output.headers[\"x-amz-lex-active-contexts\"], \"base64\").toString(\"ascii\")\n    );\n  }\n  const data: any = output.body;\n  contents.audioStream = data;\n  return Promise.resolve(contents);\n};\n\nconst deserializeAws_restJson1PostContentCommandError = async (\n  output: __HttpResponse,\n  context: __SerdeContext\n): Promise<PostContentCommandOutput> => {\n  const parsedOutput: any = {\n    ...output,\n    body: await parseBody(output.body, context),\n  };\n  let response: __SmithyException & __MetadataBearer & { [key: string]: any };\n  let errorCode: string = \"UnknownError\";\n  errorCode = loadRestJsonErrorCode(output, parsedOutput.body);\n  switch (errorCode) {\n    case \"BadGatewayException\":\n    case \"com.amazonaws.lexruntimeservice#BadGatewayException\":\n      response = {\n        ...(await deserializeAws_restJson1BadGatewayExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"BadRequestException\":\n    case \"com.amazonaws.lexruntimeservice#BadRequestException\":\n      response = {\n        ...(await deserializeAws_restJson1BadRequestExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"ConflictException\":\n    case \"com.amazonaws.lexruntimeservice#ConflictException\":\n      response = {\n        ...(await deserializeAws_restJson1ConflictExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"DependencyFailedException\":\n    case \"com.amazonaws.lexruntimeservice#DependencyFailedException\":\n      response = {\n        ...(await deserializeAws_restJson1DependencyFailedExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"InternalFailureException\":\n    case \"com.amazonaws.lexruntimeservice#InternalFailureException\":\n      response = {\n        ...(await deserializeAws_restJson1InternalFailureExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"LimitExceededException\":\n    case \"com.amazonaws.lexruntimeservice#LimitExceededException\":\n      response = {\n        ...(await deserializeAws_restJson1LimitExceededExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"LoopDetectedException\":\n    case \"com.amazonaws.lexruntimeservice#LoopDetectedException\":\n      response = {\n        ...(await deserializeAws_restJson1LoopDetectedExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"NotAcceptableException\":\n    case \"com.amazonaws.lexruntimeservice#NotAcceptableException\":\n      response = {\n        ...(await deserializeAws_restJson1NotAcceptableExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"NotFoundException\":\n    case \"com.amazonaws.lexruntimeservice#NotFoundException\":\n      response = {\n        ...(await deserializeAws_restJson1NotFoundExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"RequestTimeoutException\":\n    case \"com.amazonaws.lexruntimeservice#RequestTimeoutException\":\n      response = {\n        ...(await deserializeAws_restJson1RequestTimeoutExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"UnsupportedMediaTypeException\":\n    case \"com.amazonaws.lexruntimeservice#UnsupportedMediaTypeException\":\n      response = {\n        ...(await deserializeAws_restJson1UnsupportedMediaTypeExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    default:\n      const parsedBody = parsedOutput.body;\n      errorCode = parsedBody.code || parsedBody.Code || errorCode;\n      response = {\n        ...parsedBody,\n        name: `${errorCode}`,\n        message: parsedBody.message || parsedBody.Message || errorCode,\n        $fault: \"client\",\n        $metadata: deserializeMetadata(output),\n      } as any;\n  }\n  const message = response.message || response.Message || errorCode;\n  response.message = message;\n  delete response.Message;\n  return Promise.reject(Object.assign(new Error(message), response));\n};\n\nexport const deserializeAws_restJson1PostTextCommand = async (\n  output: __HttpResponse,\n  context: __SerdeContext\n): Promise<PostTextCommandOutput> => {\n  if (output.statusCode !== 200 && output.statusCode >= 300) {\n    return deserializeAws_restJson1PostTextCommandError(output, context);\n  }\n  const contents: PostTextCommandOutput = {\n    $metadata: deserializeMetadata(output),\n    activeContexts: undefined,\n    alternativeIntents: undefined,\n    botVersion: undefined,\n    dialogState: undefined,\n    intentName: undefined,\n    message: undefined,\n    messageFormat: undefined,\n    nluIntentConfidence: undefined,\n    responseCard: undefined,\n    sentimentResponse: undefined,\n    sessionAttributes: undefined,\n    sessionId: undefined,\n    slotToElicit: undefined,\n    slots: undefined,\n  };\n  const data: any = await parseBody(output.body, context);\n  if (data.activeContexts !== undefined && data.activeContexts !== null) {\n    contents.activeContexts = deserializeAws_restJson1ActiveContextsList(data.activeContexts, context);\n  }\n  if (data.alternativeIntents !== undefined && data.alternativeIntents !== null) {\n    contents.alternativeIntents = deserializeAws_restJson1IntentList(data.alternativeIntents, context);\n  }\n  if (data.botVersion !== undefined && data.botVersion !== null) {\n    contents.botVersion = data.botVersion;\n  }\n  if (data.dialogState !== undefined && data.dialogState !== null) {\n    contents.dialogState = data.dialogState;\n  }\n  if (data.intentName !== undefined && data.intentName !== null) {\n    contents.intentName = data.intentName;\n  }\n  if (data.message !== undefined && data.message !== null) {\n    contents.message = data.message;\n  }\n  if (data.messageFormat !== undefined && data.messageFormat !== null) {\n    contents.messageFormat = data.messageFormat;\n  }\n  if (data.nluIntentConfidence !== undefined && data.nluIntentConfidence !== null) {\n    contents.nluIntentConfidence = deserializeAws_restJson1IntentConfidence(data.nluIntentConfidence, context);\n  }\n  if (data.responseCard !== undefined && data.responseCard !== null) {\n    contents.responseCard = deserializeAws_restJson1ResponseCard(data.responseCard, context);\n  }\n  if (data.sentimentResponse !== undefined && data.sentimentResponse !== null) {\n    contents.sentimentResponse = deserializeAws_restJson1SentimentResponse(data.sentimentResponse, context);\n  }\n  if (data.sessionAttributes !== undefined && data.sessionAttributes !== null) {\n    contents.sessionAttributes = deserializeAws_restJson1StringMap(data.sessionAttributes, context);\n  }\n  if (data.sessionId !== undefined && data.sessionId !== null) {\n    contents.sessionId = data.sessionId;\n  }\n  if (data.slotToElicit !== undefined && data.slotToElicit !== null) {\n    contents.slotToElicit = data.slotToElicit;\n  }\n  if (data.slots !== undefined && data.slots !== null) {\n    contents.slots = deserializeAws_restJson1StringMap(data.slots, context);\n  }\n  return Promise.resolve(contents);\n};\n\nconst deserializeAws_restJson1PostTextCommandError = async (\n  output: __HttpResponse,\n  context: __SerdeContext\n): Promise<PostTextCommandOutput> => {\n  const parsedOutput: any = {\n    ...output,\n    body: await parseBody(output.body, context),\n  };\n  let response: __SmithyException & __MetadataBearer & { [key: string]: any };\n  let errorCode: string = \"UnknownError\";\n  errorCode = loadRestJsonErrorCode(output, parsedOutput.body);\n  switch (errorCode) {\n    case \"BadGatewayException\":\n    case \"com.amazonaws.lexruntimeservice#BadGatewayException\":\n      response = {\n        ...(await deserializeAws_restJson1BadGatewayExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"BadRequestException\":\n    case \"com.amazonaws.lexruntimeservice#BadRequestException\":\n      response = {\n        ...(await deserializeAws_restJson1BadRequestExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"ConflictException\":\n    case \"com.amazonaws.lexruntimeservice#ConflictException\":\n      response = {\n        ...(await deserializeAws_restJson1ConflictExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"DependencyFailedException\":\n    case \"com.amazonaws.lexruntimeservice#DependencyFailedException\":\n      response = {\n        ...(await deserializeAws_restJson1DependencyFailedExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"InternalFailureException\":\n    case \"com.amazonaws.lexruntimeservice#InternalFailureException\":\n      response = {\n        ...(await deserializeAws_restJson1InternalFailureExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"LimitExceededException\":\n    case \"com.amazonaws.lexruntimeservice#LimitExceededException\":\n      response = {\n        ...(await deserializeAws_restJson1LimitExceededExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"LoopDetectedException\":\n    case \"com.amazonaws.lexruntimeservice#LoopDetectedException\":\n      response = {\n        ...(await deserializeAws_restJson1LoopDetectedExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"NotFoundException\":\n    case \"com.amazonaws.lexruntimeservice#NotFoundException\":\n      response = {\n        ...(await deserializeAws_restJson1NotFoundExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    default:\n      const parsedBody = parsedOutput.body;\n      errorCode = parsedBody.code || parsedBody.Code || errorCode;\n      response = {\n        ...parsedBody,\n        name: `${errorCode}`,\n        message: parsedBody.message || parsedBody.Message || errorCode,\n        $fault: \"client\",\n        $metadata: deserializeMetadata(output),\n      } as any;\n  }\n  const message = response.message || response.Message || errorCode;\n  response.message = message;\n  delete response.Message;\n  return Promise.reject(Object.assign(new Error(message), response));\n};\n\nexport const deserializeAws_restJson1PutSessionCommand = async (\n  output: __HttpResponse,\n  context: __SerdeContext\n): Promise<PutSessionCommandOutput> => {\n  if (output.statusCode !== 200 && output.statusCode >= 300) {\n    return deserializeAws_restJson1PutSessionCommandError(output, context);\n  }\n  const contents: PutSessionCommandOutput = {\n    $metadata: deserializeMetadata(output),\n    activeContexts: undefined,\n    audioStream: undefined,\n    contentType: undefined,\n    dialogState: undefined,\n    intentName: undefined,\n    message: undefined,\n    messageFormat: undefined,\n    sessionAttributes: undefined,\n    sessionId: undefined,\n    slotToElicit: undefined,\n    slots: undefined,\n  };\n  if (output.headers[\"content-type\"] !== undefined) {\n    contents.contentType = output.headers[\"content-type\"];\n  }\n  if (output.headers[\"x-amz-lex-intent-name\"] !== undefined) {\n    contents.intentName = output.headers[\"x-amz-lex-intent-name\"];\n  }\n  if (output.headers[\"x-amz-lex-slots\"] !== undefined) {\n    contents.slots = new __LazyJsonString(Buffer.from(output.headers[\"x-amz-lex-slots\"], \"base64\").toString(\"ascii\"));\n  }\n  if (output.headers[\"x-amz-lex-session-attributes\"] !== undefined) {\n    contents.sessionAttributes = new __LazyJsonString(\n      Buffer.from(output.headers[\"x-amz-lex-session-attributes\"], \"base64\").toString(\"ascii\")\n    );\n  }\n  if (output.headers[\"x-amz-lex-message\"] !== undefined) {\n    contents.message = output.headers[\"x-amz-lex-message\"];\n  }\n  if (output.headers[\"x-amz-lex-message-format\"] !== undefined) {\n    contents.messageFormat = output.headers[\"x-amz-lex-message-format\"];\n  }\n  if (output.headers[\"x-amz-lex-dialog-state\"] !== undefined) {\n    contents.dialogState = output.headers[\"x-amz-lex-dialog-state\"];\n  }\n  if (output.headers[\"x-amz-lex-slot-to-elicit\"] !== undefined) {\n    contents.slotToElicit = output.headers[\"x-amz-lex-slot-to-elicit\"];\n  }\n  if (output.headers[\"x-amz-lex-session-id\"] !== undefined) {\n    contents.sessionId = output.headers[\"x-amz-lex-session-id\"];\n  }\n  if (output.headers[\"x-amz-lex-active-contexts\"] !== undefined) {\n    contents.activeContexts = new __LazyJsonString(\n      Buffer.from(output.headers[\"x-amz-lex-active-contexts\"], \"base64\").toString(\"ascii\")\n    );\n  }\n  const data: any = output.body;\n  contents.audioStream = data;\n  return Promise.resolve(contents);\n};\n\nconst deserializeAws_restJson1PutSessionCommandError = async (\n  output: __HttpResponse,\n  context: __SerdeContext\n): Promise<PutSessionCommandOutput> => {\n  const parsedOutput: any = {\n    ...output,\n    body: await parseBody(output.body, context),\n  };\n  let response: __SmithyException & __MetadataBearer & { [key: string]: any };\n  let errorCode: string = \"UnknownError\";\n  errorCode = loadRestJsonErrorCode(output, parsedOutput.body);\n  switch (errorCode) {\n    case \"BadGatewayException\":\n    case \"com.amazonaws.lexruntimeservice#BadGatewayException\":\n      response = {\n        ...(await deserializeAws_restJson1BadGatewayExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"BadRequestException\":\n    case \"com.amazonaws.lexruntimeservice#BadRequestException\":\n      response = {\n        ...(await deserializeAws_restJson1BadRequestExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"ConflictException\":\n    case \"com.amazonaws.lexruntimeservice#ConflictException\":\n      response = {\n        ...(await deserializeAws_restJson1ConflictExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"DependencyFailedException\":\n    case \"com.amazonaws.lexruntimeservice#DependencyFailedException\":\n      response = {\n        ...(await deserializeAws_restJson1DependencyFailedExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"InternalFailureException\":\n    case \"com.amazonaws.lexruntimeservice#InternalFailureException\":\n      response = {\n        ...(await deserializeAws_restJson1InternalFailureExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"LimitExceededException\":\n    case \"com.amazonaws.lexruntimeservice#LimitExceededException\":\n      response = {\n        ...(await deserializeAws_restJson1LimitExceededExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"NotAcceptableException\":\n    case \"com.amazonaws.lexruntimeservice#NotAcceptableException\":\n      response = {\n        ...(await deserializeAws_restJson1NotAcceptableExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    case \"NotFoundException\":\n    case \"com.amazonaws.lexruntimeservice#NotFoundException\":\n      response = {\n        ...(await deserializeAws_restJson1NotFoundExceptionResponse(parsedOutput, context)),\n        name: errorCode,\n        $metadata: deserializeMetadata(output),\n      };\n      break;\n    default:\n      const parsedBody = parsedOutput.body;\n      errorCode = parsedBody.code || parsedBody.Code || errorCode;\n      response = {\n        ...parsedBody,\n        name: `${errorCode}`,\n        message: parsedBody.message || parsedBody.Message || errorCode,\n        $fault: \"client\",\n        $metadata: deserializeMetadata(output),\n      } as any;\n  }\n  const message = response.message || response.Message || errorCode;\n  response.message = message;\n  delete response.Message;\n  return Promise.reject(Object.assign(new Error(message), response));\n};\n\nconst deserializeAws_restJson1BadGatewayExceptionResponse = async (\n  parsedOutput: any,\n  context: __SerdeContext\n): Promise<BadGatewayException> => {\n  const contents: BadGatewayException = {\n    name: \"BadGatewayException\",\n    $fault: \"server\",\n    $metadata: deserializeMetadata(parsedOutput),\n    Message: undefined,\n  };\n  const data: any = parsedOutput.body;\n  if (data.Message !== undefined && data.Message !== null) {\n    contents.Message = data.Message;\n  }\n  return contents;\n};\n\nconst deserializeAws_restJson1BadRequestExceptionResponse = async (\n  parsedOutput: any,\n  context: __SerdeContext\n): Promise<BadRequestException> => {\n  const contents: BadRequestException = {\n    name: \"BadRequestException\",\n    $fault: \"client\",\n    $metadata: deserializeMetadata(parsedOutput),\n    message: undefined,\n  };\n  const data: any = parsedOutput.body;\n  if (data.message !== undefined && data.message !== null) {\n    contents.message = data.message;\n  }\n  return contents;\n};\n\nconst deserializeAws_restJson1ConflictExceptionResponse = async (\n  parsedOutput: any,\n  context: __SerdeContext\n): Promise<ConflictException> => {\n  const contents: ConflictException = {\n    name: \"ConflictException\",\n    $fault: \"client\",\n    $metadata: deserializeMetadata(parsedOutput),\n    message: undefined,\n  };\n  const data: any = parsedOutput.body;\n  if (data.message !== undefined && data.message !== null) {\n    contents.message = data.message;\n  }\n  return contents;\n};\n\nconst deserializeAws_restJson1DependencyFailedExceptionResponse = async (\n  parsedOutput: any,\n  context: __SerdeContext\n): Promise<DependencyFailedException> => {\n  const contents: DependencyFailedException = {\n    name: \"DependencyFailedException\",\n    $fault: \"client\",\n    $metadata: deserializeMetadata(parsedOutput),\n    Message: undefined,\n  };\n  const data: any = parsedOutput.body;\n  if (data.Message !== undefined && data.Message !== null) {\n    contents.Message = data.Message;\n  }\n  return contents;\n};\n\nconst deserializeAws_restJson1InternalFailureExceptionResponse = async (\n  parsedOutput: any,\n  context: __SerdeContext\n): Promise<InternalFailureException> => {\n  const contents: InternalFailureException = {\n    name: \"InternalFailureException\",\n    $fault: \"server\",\n    $metadata: deserializeMetadata(parsedOutput),\n    message: undefined,\n  };\n  const data: any = parsedOutput.body;\n  if (data.message !== undefined && data.message !== null) {\n    contents.message = data.message;\n  }\n  return contents;\n};\n\nconst deserializeAws_restJson1LimitExceededExceptionResponse = async (\n  parsedOutput: any,\n  context: __SerdeContext\n): Promise<LimitExceededException> => {\n  const contents: LimitExceededException = {\n    name: \"LimitExceededException\",\n    $fault: \"client\",\n    $metadata: deserializeMetadata(parsedOutput),\n    message: undefined,\n    retryAfterSeconds: undefined,\n  };\n  if (parsedOutput.headers[\"retry-after\"] !== undefined) {\n    contents.retryAfterSeconds = parsedOutput.headers[\"retry-after\"];\n  }\n  const data: any = parsedOutput.body;\n  if (data.message !== undefined && data.message !== null) {\n    contents.message = data.message;\n  }\n  return contents;\n};\n\nconst deserializeAws_restJson1LoopDetectedExceptionResponse = async (\n  parsedOutput: any,\n  context: __SerdeContext\n): Promise<LoopDetectedException> => {\n  const contents: LoopDetectedException = {\n    name: \"LoopDetectedException\",\n    $fault: \"server\",\n    $metadata: deserializeMetadata(parsedOutput),\n    Message: undefined,\n  };\n  const data: any = parsedOutput.body;\n  if (data.Message !== undefined && data.Message !== null) {\n    contents.Message = data.Message;\n  }\n  return contents;\n};\n\nconst deserializeAws_restJson1NotAcceptableExceptionResponse = async (\n  parsedOutput: any,\n  context: __SerdeContext\n): Promise<NotAcceptableException> => {\n  const contents: NotAcceptableException = {\n    name: \"NotAcceptableException\",\n    $fault: \"client\",\n    $metadata: deserializeMetadata(parsedOutput),\n    message: undefined,\n  };\n  const data: any = parsedOutput.body;\n  if (data.message !== undefined && data.message !== null) {\n    contents.message = data.message;\n  }\n  return contents;\n};\n\nconst deserializeAws_restJson1NotFoundExceptionResponse = async (\n  parsedOutput: any,\n  context: __SerdeContext\n): Promise<NotFoundException> => {\n  const contents: NotFoundException = {\n    name: \"NotFoundException\",\n    $fault: \"client\",\n    $metadata: deserializeMetadata(parsedOutput),\n    message: undefined,\n  };\n  const data: any = parsedOutput.body;\n  if (data.message !== undefined && data.message !== null) {\n    contents.message = data.message;\n  }\n  return contents;\n};\n\nconst deserializeAws_restJson1RequestTimeoutExceptionResponse = async (\n  parsedOutput: any,\n  context: __SerdeContext\n): Promise<RequestTimeoutException> => {\n  const contents: RequestTimeoutException = {\n    name: \"RequestTimeoutException\",\n    $fault: \"client\",\n    $metadata: deserializeMetadata(parsedOutput),\n    message: undefined,\n  };\n  const data: any = parsedOutput.body;\n  if (data.message !== undefined && data.message !== null) {\n    contents.message = data.message;\n  }\n  return contents;\n};\n\nconst deserializeAws_restJson1UnsupportedMediaTypeExceptionResponse = async (\n  parsedOutput: any,\n  context: __SerdeContext\n): Promise<UnsupportedMediaTypeException> => {\n  const contents: UnsupportedMediaTypeException = {\n    name: \"UnsupportedMediaTypeException\",\n    $fault: \"client\",\n    $metadata: deserializeMetadata(parsedOutput),\n    message: undefined,\n  };\n  const data: any = parsedOutput.body;\n  if (data.message !== undefined && data.message !== null) {\n    contents.message = data.message;\n  }\n  return contents;\n};\n\nconst serializeAws_restJson1ActiveContext = (input: ActiveContext, context: __SerdeContext): any => {\n  return {\n    ...(input.name !== undefined && input.name !== null && { name: input.name }),\n    ...(input.parameters !== undefined &&\n      input.parameters !== null && {\n        parameters: serializeAws_restJson1ActiveContextParametersMap(input.parameters, context),\n      }),\n    ...(input.timeToLive !== undefined &&\n      input.timeToLive !== null && {\n        timeToLive: serializeAws_restJson1ActiveContextTimeToLive(input.timeToLive, context),\n      }),\n  };\n};\n\nconst serializeAws_restJson1ActiveContextParametersMap = (\n  input: { [key: string]: string },\n  context: __SerdeContext\n): any => {\n  return Object.entries(input).reduce((acc: { [key: string]: string }, [key, value]: [string, any]) => {\n    if (value === null) {\n      return acc;\n    }\n    return {\n      ...acc,\n      [key]: value,\n    };\n  }, {});\n};\n\nconst serializeAws_restJson1ActiveContextsList = (input: ActiveContext[], context: __SerdeContext): any => {\n  return input\n    .filter((e: any) => e != null)\n    .map((entry) => {\n      if (entry === null) {\n        return null as any;\n      }\n      return serializeAws_restJson1ActiveContext(entry, context);\n    });\n};\n\nconst serializeAws_restJson1ActiveContextTimeToLive = (\n  input: ActiveContextTimeToLive,\n  context: __SerdeContext\n): any => {\n  return {\n    ...(input.timeToLiveInSeconds !== undefined &&\n      input.timeToLiveInSeconds !== null && { timeToLiveInSeconds: input.timeToLiveInSeconds }),\n    ...(input.turnsToLive !== undefined && input.turnsToLive !== null && { turnsToLive: input.turnsToLive }),\n  };\n};\n\nconst serializeAws_restJson1DialogAction = (input: DialogAction, context: __SerdeContext): any => {\n  return {\n    ...(input.fulfillmentState !== undefined &&\n      input.fulfillmentState !== null && { fulfillmentState: input.fulfillmentState }),\n    ...(input.intentName !== undefined && input.intentName !== null && { intentName: input.intentName }),\n    ...(input.message !== undefined && input.message !== null && { message: input.message }),\n    ...(input.messageFormat !== undefined && input.messageFormat !== null && { messageFormat: input.messageFormat }),\n    ...(input.slotToElicit !== undefined && input.slotToElicit !== null && { slotToElicit: input.slotToElicit }),\n    ...(input.slots !== undefined &&\n      input.slots !== null && { slots: serializeAws_restJson1StringMap(input.slots, context) }),\n    ...(input.type !== undefined && input.type !== null && { type: input.type }),\n  };\n};\n\nconst serializeAws_restJson1IntentSummary = (input: IntentSummary, context: __SerdeContext): any => {\n  return {\n    ...(input.checkpointLabel !== undefined &&\n      input.checkpointLabel !== null && { checkpointLabel: input.checkpointLabel }),\n    ...(input.confirmationStatus !== undefined &&\n      input.confirmationStatus !== null && { confirmationStatus: input.confirmationStatus }),\n    ...(input.dialogActionType !== undefined &&\n      input.dialogActionType !== null && { dialogActionType: input.dialogActionType }),\n    ...(input.fulfillmentState !== undefined &&\n      input.fulfillmentState !== null && { fulfillmentState: input.fulfillmentState }),\n    ...(input.intentName !== undefined && input.intentName !== null && { intentName: input.intentName }),\n    ...(input.slotToElicit !== undefined && input.slotToElicit !== null && { slotToElicit: input.slotToElicit }),\n    ...(input.slots !== undefined &&\n      input.slots !== null && { slots: serializeAws_restJson1StringMap(input.slots, context) }),\n  };\n};\n\nconst serializeAws_restJson1IntentSummaryList = (input: IntentSummary[], context: __SerdeContext): any => {\n  return input\n    .filter((e: any) => e != null)\n    .map((entry) => {\n      if (entry === null) {\n        return null as any;\n      }\n      return serializeAws_restJson1IntentSummary(entry, context);\n    });\n};\n\nconst serializeAws_restJson1StringMap = (input: { [key: string]: string }, context: __SerdeContext): any => {\n  return Object.entries(input).reduce((acc: { [key: string]: string }, [key, value]: [string, any]) => {\n    if (value === null) {\n      return acc;\n    }\n    return {\n      ...acc,\n      [key]: value,\n    };\n  }, {});\n};\n\nconst deserializeAws_restJson1ActiveContext = (output: any, context: __SerdeContext): ActiveContext => {\n  return {\n    name: output.name !== undefined && output.name !== null ? output.name : undefined,\n    parameters:\n      output.parameters !== undefined && output.parameters !== null\n        ? deserializeAws_restJson1ActiveContextParametersMap(output.parameters, context)\n        : undefined,\n    timeToLive:\n      output.timeToLive !== undefined && output.timeToLive !== null\n        ? deserializeAws_restJson1ActiveContextTimeToLive(output.timeToLive, context)\n        : undefined,\n  } as any;\n};\n\nconst deserializeAws_restJson1ActiveContextParametersMap = (\n  output: any,\n  context: __SerdeContext\n): { [key: string]: string } => {\n  return Object.entries(output).reduce((acc: { [key: string]: string }, [key, value]: [string, any]) => {\n    if (value === null) {\n      return acc;\n    }\n    return {\n      ...acc,\n      [key]: value,\n    };\n  }, {});\n};\n\nconst deserializeAws_restJson1ActiveContextsList = (output: any, context: __SerdeContext): ActiveContext[] => {\n  return (output || [])\n    .filter((e: any) => e != null)\n    .map((entry: any) => {\n      if (entry === null) {\n        return null as any;\n      }\n      return deserializeAws_restJson1ActiveContext(entry, context);\n    });\n};\n\nconst deserializeAws_restJson1ActiveContextTimeToLive = (\n  output: any,\n  context: __SerdeContext\n): ActiveContextTimeToLive => {\n  return {\n    timeToLiveInSeconds:\n      output.timeToLiveInSeconds !== undefined && output.timeToLiveInSeconds !== null\n        ? output.timeToLiveInSeconds\n        : undefined,\n    turnsToLive: output.turnsToLive !== undefined && output.turnsToLive !== null ? output.turnsToLive : undefined,\n  } as any;\n};\n\nconst deserializeAws_restJson1Button = (output: any, context: __SerdeContext): Button => {\n  return {\n    text: output.text !== undefined && output.text !== null ? output.text : undefined,\n    value: output.value !== undefined && output.value !== null ? output.value : undefined,\n  } as any;\n};\n\nconst deserializeAws_restJson1DialogAction = (output: any, context: __SerdeContext): DialogAction => {\n  return {\n    fulfillmentState:\n      output.fulfillmentState !== undefined && output.fulfillmentState !== null ? output.fulfillmentState : undefined,\n    intentName: output.intentName !== undefined && output.intentName !== null ? output.intentName : undefined,\n    message: output.message !== undefined && output.message !== null ? output.message : undefined,\n    messageFormat:\n      output.messageFormat !== undefined && output.messageFormat !== null ? output.messageFormat : undefined,\n    slotToElicit: output.slotToElicit !== undefined && output.slotToElicit !== null ? output.slotToElicit : undefined,\n    slots:\n      output.slots !== undefined && output.slots !== null\n        ? deserializeAws_restJson1StringMap(output.slots, context)\n        : undefined,\n    type: output.type !== undefined && output.type !== null ? output.type : undefined,\n  } as any;\n};\n\nconst deserializeAws_restJson1GenericAttachment = (output: any, context: __SerdeContext): GenericAttachment => {\n  return {\n    attachmentLinkUrl:\n      output.attachmentLinkUrl !== undefined && output.attachmentLinkUrl !== null\n        ? output.attachmentLinkUrl\n        : undefined,\n    buttons:\n      output.buttons !== undefined && output.buttons !== null\n        ? deserializeAws_restJson1listOfButtons(output.buttons, context)\n        : undefined,\n    imageUrl: output.imageUrl !== undefined && output.imageUrl !== null ? output.imageUrl : undefined,\n    subTitle: output.subTitle !== undefined && output.subTitle !== null ? output.subTitle : undefined,\n    title: output.title !== undefined && output.title !== null ? output.title : undefined,\n  } as any;\n};\n\nconst deserializeAws_restJson1genericAttachmentList = (output: any, context: __SerdeContext): GenericAttachment[] => {\n  return (output || [])\n    .filter((e: any) => e != null)\n    .map((entry: any) => {\n      if (entry === null) {\n        return null as any;\n      }\n      return deserializeAws_restJson1GenericAttachment(entry, context);\n    });\n};\n\nconst deserializeAws_restJson1IntentConfidence = (output: any, context: __SerdeContext): IntentConfidence => {\n  return {\n    score: output.score !== undefined && output.score !== null ? output.score : undefined,\n  } as any;\n};\n\nconst deserializeAws_restJson1IntentList = (output: any, context: __SerdeContext): PredictedIntent[] => {\n  return (output || [])\n    .filter((e: any) => e != null)\n    .map((entry: any) => {\n      if (entry === null) {\n        return null as any;\n      }\n      return deserializeAws_restJson1PredictedIntent(entry, context);\n    });\n};\n\nconst deserializeAws_restJson1IntentSummary = (output: any, context: __SerdeContext): IntentSummary => {\n  return {\n    checkpointLabel:\n      output.checkpointLabel !== undefined && output.checkpointLabel !== null ? output.checkpointLabel : undefined,\n    confirmationStatus:\n      output.confirmationStatus !== undefined && output.confirmationStatus !== null\n        ? output.confirmationStatus\n        : undefined,\n    dialogActionType:\n      output.dialogActionType !== undefined && output.dialogActionType !== null ? output.dialogActionType : undefined,\n    fulfillmentState:\n      output.fulfillmentState !== undefined && output.fulfillmentState !== null ? output.fulfillmentState : undefined,\n    intentName: output.intentName !== undefined && output.intentName !== null ? output.intentName : undefined,\n    slotToElicit: output.slotToElicit !== undefined && output.slotToElicit !== null ? output.slotToElicit : undefined,\n    slots:\n      output.slots !== undefined && output.slots !== null\n        ? deserializeAws_restJson1StringMap(output.slots, context)\n        : undefined,\n  } as any;\n};\n\nconst deserializeAws_restJson1IntentSummaryList = (output: any, context: __SerdeContext): IntentSummary[] => {\n  return (output || [])\n    .filter((e: any) => e != null)\n    .map((entry: any) => {\n      if (entry === null) {\n        return null as any;\n      }\n      return deserializeAws_restJson1IntentSummary(entry, context);\n    });\n};\n\nconst deserializeAws_restJson1listOfButtons = (output: any, context: __SerdeContext): Button[] => {\n  return (output || [])\n    .filter((e: any) => e != null)\n    .map((entry: any) => {\n      if (entry === null) {\n        return null as any;\n      }\n      return deserializeAws_restJson1Button(entry, context);\n    });\n};\n\nconst deserializeAws_restJson1PredictedIntent = (output: any, context: __SerdeContext): PredictedIntent => {\n  return {\n    intentName: output.intentName !== undefined && output.intentName !== null ? output.intentName : undefined,\n    nluIntentConfidence:\n      output.nluIntentConfidence !== undefined && output.nluIntentConfidence !== null\n        ? deserializeAws_restJson1IntentConfidence(output.nluIntentConfidence, context)\n        : undefined,\n    slots:\n      output.slots !== undefined && output.slots !== null\n        ? deserializeAws_restJson1StringMap(output.slots, context)\n        : undefined,\n  } as any;\n};\n\nconst deserializeAws_restJson1ResponseCard = (output: any, context: __SerdeContext): ResponseCard => {\n  return {\n    contentType: output.contentType !== undefined && output.contentType !== null ? output.contentType : undefined,\n    genericAttachments:\n      output.genericAttachments !== undefined && output.genericAttachments !== null\n        ? deserializeAws_restJson1genericAttachmentList(output.genericAttachments, context)\n        : undefined,\n    version: output.version !== undefined && output.version !== null ? output.version : undefined,\n  } as any;\n};\n\nconst deserializeAws_restJson1SentimentResponse = (output: any, context: __SerdeContext): SentimentResponse => {\n  return {\n    sentimentLabel:\n      output.sentimentLabel !== undefined && output.sentimentLabel !== null ? output.sentimentLabel : undefined,\n    sentimentScore:\n      output.sentimentScore !== undefined && output.sentimentScore !== null ? output.sentimentScore : undefined,\n  } as any;\n};\n\nconst deserializeAws_restJson1StringMap = (output: any, context: __SerdeContext): { [key: string]: string } => {\n  return Object.entries(output).reduce((acc: { [key: string]: string }, [key, value]: [string, any]) => {\n    if (value === null) {\n      return acc;\n    }\n    return {\n      ...acc,\n      [key]: value,\n    };\n  }, {});\n};\n\nconst deserializeMetadata = (output: __HttpResponse): __ResponseMetadata => ({\n  httpStatusCode: output.statusCode,\n  requestId: output.headers[\"x-amzn-requestid\"] ?? output.headers[\"x-amzn-request-id\"],\n  extendedRequestId: output.headers[\"x-amz-id-2\"],\n  cfId: output.headers[\"x-amz-cf-id\"],\n});\n\n// Collect low-level response body stream to Uint8Array.\nconst collectBody = (streamBody: any = new Uint8Array(), context: __SerdeContext): Promise<Uint8Array> => {\n  if (streamBody instanceof Uint8Array) {\n    return Promise.resolve(streamBody);\n  }\n  return context.streamCollector(streamBody) || Promise.resolve(new Uint8Array());\n};\n\n// Encode Uint8Array data into string with utf-8.\nconst collectBodyString = (streamBody: any, context: __SerdeContext): Promise<string> =>\n  collectBody(streamBody, context).then((body) => context.utf8Encoder(body));\n\nconst isSerializableHeaderValue = (value: any): boolean =>\n  value !== undefined &&\n  value !== null &&\n  value !== \"\" &&\n  (!Object.getOwnPropertyNames(value).includes(\"length\") || value.length != 0) &&\n  (!Object.getOwnPropertyNames(value).includes(\"size\") || value.size != 0);\n\nconst parseBody = (streamBody: any, context: __SerdeContext): any =>\n  collectBodyString(streamBody, context).then((encoded) => {\n    if (encoded.length) {\n      return JSON.parse(encoded);\n    }\n    return {};\n  });\n\n/**\n * Load an error code for the aws.rest-json-1.1 protocol.\n */\nconst loadRestJsonErrorCode = (output: __HttpResponse, data: any): string => {\n  const findKey = (object: any, key: string) => Object.keys(object).find((k) => k.toLowerCase() === key.toLowerCase());\n\n  const sanitizeErrorCode = (rawValue: string): string => {\n    let cleanValue = rawValue;\n    if (cleanValue.indexOf(\":\") >= 0) {\n      cleanValue = cleanValue.split(\":\")[0];\n    }\n    if (cleanValue.indexOf(\"#\") >= 0) {\n      cleanValue = cleanValue.split(\"#\")[1];\n    }\n    return cleanValue;\n  };\n\n  const headerKey = findKey(output.headers, \"x-amzn-errortype\");\n  if (headerKey !== undefined) {\n    return sanitizeErrorCode(output.headers[headerKey]);\n  }\n\n  if (data.code !== undefined) {\n    return sanitizeErrorCode(data.code);\n  }\n\n  if (data[\"__type\"] !== undefined) {\n    return sanitizeErrorCode(data[\"__type\"]);\n  }\n\n  return \"\";\n};\n","import {\n  LexRuntimeServiceClientResolvedConfig,\n  ServiceInputTypes,\n  ServiceOutputTypes,\n} from \"../LexRuntimeServiceClient\";\nimport { PostTextRequest, PostTextResponse } from \"../models/models_0\";\nimport {\n  deserializeAws_restJson1PostTextCommand,\n  serializeAws_restJson1PostTextCommand,\n} from \"../protocols/Aws_restJson1\";\nimport { getSerdePlugin } from \"@aws-sdk/middleware-serde\";\nimport { HttpRequest as __HttpRequest, HttpResponse as __HttpResponse } from \"@aws-sdk/protocol-http\";\nimport { Command as $Command } from \"@aws-sdk/smithy-client\";\nimport {\n  FinalizeHandlerArguments,\n  Handler,\n  HandlerExecutionContext,\n  MiddlewareStack,\n  HttpHandlerOptions as __HttpHandlerOptions,\n  MetadataBearer as __MetadataBearer,\n  SerdeContext as __SerdeContext,\n} from \"@aws-sdk/types\";\n\nexport type PostTextCommandInput = PostTextRequest;\nexport type PostTextCommandOutput = PostTextResponse & __MetadataBearer;\n\n/**\n * <p>Sends user input to Amazon Lex. Client applications can use this API to send requests to\n *       Amazon Lex at runtime. Amazon Lex then interprets the user input using the machine learning model it\n *       built for the bot. </p>\n *          <p> In response, Amazon Lex returns the next <code>message</code> to convey to the user an\n *       optional <code>responseCard</code> to display. Consider the following example messages: </p>\n *          <ul>\n *             <li>\n *                <p> For a user input \"I would like a pizza\", Amazon Lex might return a response with a\n *           message eliciting slot data (for example, PizzaSize): \"What size pizza would you like?\"\n *         </p>\n *             </li>\n *             <li>\n *                <p> After the user provides all of the pizza order information, Amazon Lex might return a\n *           response with a message to obtain user confirmation \"Proceed with the pizza order?\".\n *         </p>\n *             </li>\n *             <li>\n *                <p> After the user replies to a confirmation prompt with a \"yes\", Amazon Lex might return\n *           a conclusion statement: \"Thank you, your cheese pizza has been ordered.\". </p>\n *             </li>\n *          </ul>\n *\n *          <p> Not all Amazon Lex messages require a user response. For example, a conclusion statement\n *       does not require a response. Some messages require only a \"yes\" or \"no\" user response. In\n *       addition to the <code>message</code>, Amazon Lex provides additional context about the message\n *       in the response that you might use to enhance client behavior, for example, to display the\n *       appropriate client user interface. These are the <code>slotToElicit</code>,\n *         <code>dialogState</code>, <code>intentName</code>, and <code>slots</code> fields in the\n *       response. Consider the following examples: </p>\n *\n *          <ul>\n *             <li>\n *                <p>If the message is to elicit slot data, Amazon Lex returns the following context\n *           information:</p>\n *                <ul>\n *                   <li>\n *                      <p>\n *                         <code>dialogState</code> set to ElicitSlot </p>\n *                   </li>\n *                   <li>\n *                      <p>\n *                         <code>intentName</code> set to the intent name in the current context </p>\n *                   </li>\n *                   <li>\n *                      <p>\n *                         <code>slotToElicit</code> set to the slot name for which the <code>message</code> is\n *               eliciting information </p>\n *                   </li>\n *                   <li>\n *                      <p>\n *                         <code>slots</code> set to a map of slots, configured for the intent, with currently\n *               known values </p>\n *                   </li>\n *                </ul>\n *             </li>\n *             <li>\n *                <p> If the message is a confirmation prompt, the <code>dialogState</code> is set to\n *           ConfirmIntent and <code>SlotToElicit</code> is set to null. </p>\n *             </li>\n *             <li>\n *                <p>If the message is a clarification prompt (configured for the intent) that indicates\n *           that user intent is not understood, the <code>dialogState</code> is set to ElicitIntent\n *           and <code>slotToElicit</code> is set to null. </p>\n *             </li>\n *          </ul>\n *\n *          <p> In addition, Amazon Lex also returns your application-specific\n *         <code>sessionAttributes</code>. For more information, see <a href=\"https://docs.aws.amazon.com/lex/latest/dg/context-mgmt.html\">Managing Conversation Context</a>. </p>\n */\nexport class PostTextCommand extends $Command<\n  PostTextCommandInput,\n  PostTextCommandOutput,\n  LexRuntimeServiceClientResolvedConfig\n> {\n  // Start section: command_properties\n  // End section: command_properties\n\n  constructor(readonly input: PostTextCommandInput) {\n    // Start section: command_constructor\n    super();\n    // End section: command_constructor\n  }\n\n  /**\n   * @internal\n   */\n  resolveMiddleware(\n    clientStack: MiddlewareStack<ServiceInputTypes, ServiceOutputTypes>,\n    configuration: LexRuntimeServiceClientResolvedConfig,\n    options?: __HttpHandlerOptions\n  ): Handler<PostTextCommandInput, PostTextCommandOutput> {\n    this.middlewareStack.use(getSerdePlugin(configuration, this.serialize, this.deserialize));\n\n    const stack = clientStack.concat(this.middlewareStack);\n\n    const { logger } = configuration;\n    const clientName = \"LexRuntimeServiceClient\";\n    const commandName = \"PostTextCommand\";\n    const handlerExecutionContext: HandlerExecutionContext = {\n      logger,\n      clientName,\n      commandName,\n      inputFilterSensitiveLog: PostTextRequest.filterSensitiveLog,\n      outputFilterSensitiveLog: PostTextResponse.filterSensitiveLog,\n    };\n    const { requestHandler } = configuration;\n    return stack.resolve(\n      (request: FinalizeHandlerArguments<any>) =>\n        requestHandler.handle(request.request as __HttpRequest, options || {}),\n      handlerExecutionContext\n    );\n  }\n\n  private serialize(input: PostTextCommandInput, context: __SerdeContext): Promise<__HttpRequest> {\n    return serializeAws_restJson1PostTextCommand(input, context);\n  }\n\n  private deserialize(output: __HttpResponse, context: __SerdeContext): Promise<PostTextCommandOutput> {\n    return deserializeAws_restJson1PostTextCommand(output, context);\n  }\n\n  // Start section: command_body_extra\n  // End section: command_body_extra\n}\n","import {\n  LexRuntimeServiceClientResolvedConfig,\n  ServiceInputTypes,\n  ServiceOutputTypes,\n} from \"../LexRuntimeServiceClient\";\nimport { PostContentRequest, PostContentResponse } from \"../models/models_0\";\nimport {\n  deserializeAws_restJson1PostContentCommand,\n  serializeAws_restJson1PostContentCommand,\n} from \"../protocols/Aws_restJson1\";\nimport { getSerdePlugin } from \"@aws-sdk/middleware-serde\";\nimport { HttpRequest as __HttpRequest, HttpResponse as __HttpResponse } from \"@aws-sdk/protocol-http\";\nimport { Command as $Command } from \"@aws-sdk/smithy-client\";\nimport {\n  FinalizeHandlerArguments,\n  Handler,\n  HandlerExecutionContext,\n  MiddlewareStack,\n  HttpHandlerOptions as __HttpHandlerOptions,\n  MetadataBearer as __MetadataBearer,\n  SerdeContext as __SerdeContext,\n} from \"@aws-sdk/types\";\n\nexport type PostContentCommandInput = Omit<PostContentRequest, \"inputStream\"> & {\n  inputStream: PostContentRequest[\"inputStream\"] | string | Uint8Array | Buffer;\n};\nexport type PostContentCommandOutput = PostContentResponse & __MetadataBearer;\n\n/**\n * <p> Sends user input (text or speech) to Amazon Lex. Clients use this API to send text and audio\n *       requests to Amazon Lex at runtime. Amazon Lex interprets the user input using the machine learning model\n *       that it built for the bot. </p>\n *          <p>The <code>PostContent</code> operation supports audio input at 8kHz and 16kHz. You can use\n *       8kHz audio to achieve higher speech recognition accuracy in telephone audio applications. </p>\n *          <p> In response, Amazon Lex returns the next message to convey to the user. Consider the following\n *       example messages: </p>\n *          <ul>\n *             <li>\n *                <p> For a user input \"I would like a pizza,\" Amazon Lex might return a response with a message\n *           eliciting slot data (for example, <code>PizzaSize</code>): \"What size pizza would you\n *           like?\". </p>\n *             </li>\n *             <li>\n *                <p> After the user provides all of the pizza order information, Amazon Lex might return a\n *           response with a message to get user confirmation: \"Order the pizza?\". </p>\n *             </li>\n *             <li>\n *                <p> After the user replies \"Yes\" to the confirmation prompt, Amazon Lex might return a\n *           conclusion statement: \"Thank you, your cheese pizza has been ordered.\". </p>\n *             </li>\n *          </ul>\n *          <p> Not all Amazon Lex messages require a response from the user. For example, conclusion\n *       statements do not require a response. Some messages require only a yes or no response. In\n *       addition to the <code>message</code>, Amazon Lex provides additional context about the message in\n *       the response that you can use to enhance client behavior, such as displaying the appropriate\n *       client user interface. Consider the following examples: </p>\n *          <ul>\n *             <li>\n *                <p> If the message is to elicit slot data, Amazon Lex returns the following context\n *           information: </p>\n *                <ul>\n *                   <li>\n *                      <p>\n *                         <code>x-amz-lex-dialog-state</code> header set to <code>ElicitSlot</code>\n *                      </p>\n *                   </li>\n *                   <li>\n *                      <p>\n *                         <code>x-amz-lex-intent-name</code> header set to the intent name in the current\n *               context </p>\n *                   </li>\n *                   <li>\n *                      <p>\n *                         <code>x-amz-lex-slot-to-elicit</code> header set to the slot name for which the\n *                 <code>message</code> is eliciting information </p>\n *                   </li>\n *                   <li>\n *                      <p>\n *                         <code>x-amz-lex-slots</code> header set to a map of slots configured for the intent\n *               with their current values </p>\n *                   </li>\n *                </ul>\n *             </li>\n *             <li>\n *                <p> If the message is a confirmation prompt, the <code>x-amz-lex-dialog-state</code>\n *           header is set to <code>Confirmation</code> and the <code>x-amz-lex-slot-to-elicit</code>\n *           header is omitted. </p>\n *             </li>\n *             <li>\n *                <p> If the message is a clarification prompt configured for the intent, indicating that\n *           the user intent is not understood, the <code>x-amz-dialog-state</code> header is set to\n *             <code>ElicitIntent</code> and the <code>x-amz-slot-to-elicit</code> header is omitted.\n *         </p>\n *             </li>\n *          </ul>\n *          <p> In addition, Amazon Lex also returns your application-specific <code>sessionAttributes</code>.\n *       For more information, see <a href=\"https://docs.aws.amazon.com/lex/latest/dg/context-mgmt.html\">Managing Conversation Context</a>. </p>\n */\nexport class PostContentCommand extends $Command<\n  PostContentCommandInput,\n  PostContentCommandOutput,\n  LexRuntimeServiceClientResolvedConfig\n> {\n  // Start section: command_properties\n  // End section: command_properties\n\n  constructor(readonly input: PostContentCommandInput) {\n    // Start section: command_constructor\n    super();\n    // End section: command_constructor\n  }\n\n  /**\n   * @internal\n   */\n  resolveMiddleware(\n    clientStack: MiddlewareStack<ServiceInputTypes, ServiceOutputTypes>,\n    configuration: LexRuntimeServiceClientResolvedConfig,\n    options?: __HttpHandlerOptions\n  ): Handler<PostContentCommandInput, PostContentCommandOutput> {\n    this.middlewareStack.use(getSerdePlugin(configuration, this.serialize, this.deserialize));\n\n    const stack = clientStack.concat(this.middlewareStack);\n\n    const { logger } = configuration;\n    const clientName = \"LexRuntimeServiceClient\";\n    const commandName = \"PostContentCommand\";\n    const handlerExecutionContext: HandlerExecutionContext = {\n      logger,\n      clientName,\n      commandName,\n      inputFilterSensitiveLog: PostContentRequest.filterSensitiveLog,\n      outputFilterSensitiveLog: PostContentResponse.filterSensitiveLog,\n    };\n    const { requestHandler } = configuration;\n    return stack.resolve(\n      (request: FinalizeHandlerArguments<any>) =>\n        requestHandler.handle(request.request as __HttpRequest, options || {}),\n      handlerExecutionContext\n    );\n  }\n\n  private serialize(input: PostContentCommandInput, context: __SerdeContext): Promise<__HttpRequest> {\n    return serializeAws_restJson1PostContentCommand(input, context);\n  }\n\n  private deserialize(output: __HttpResponse, context: __SerdeContext): Promise<PostContentCommandOutput> {\n    return deserializeAws_restJson1PostContentCommand(output, context);\n  }\n\n  // Start section: command_body_extra\n  // End section: command_body_extra\n}\n","import { Readable } from 'stream';\nexport const convert = (\n\tstream: Blob | Readable | ReadableStream\n): Promise<Uint8Array> => {\n\tif (stream instanceof Blob || stream instanceof ReadableStream) {\n\t\treturn new Response(stream)\n\t\t\t.arrayBuffer()\n\t\t\t.then(buffer => new Uint8Array(buffer));\n\t} else {\n\t\tthrow new Error('Readable is not supported.');\n\t}\n};\n","/*\n * Copyright 2017-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\nimport { AbstractInteractionsProvider } from './InteractionsProvider';\nimport {\n\tInteractionsOptions,\n\tInteractionsResponse,\n\tInteractionsMessage,\n} from '../types';\nimport {\n\tLexRuntimeServiceClient,\n\tPostTextCommand,\n\tPostContentCommand,\n} from '@aws-sdk/client-lex-runtime-service';\nimport {\n\tConsoleLogger as Logger,\n\tCredentials,\n\tgetAmplifyUserAgent,\n} from '@aws-amplify/core';\nimport { convert } from './AWSLexProviderHelper/convert';\n\nconst logger = new Logger('AWSLexProvider');\n\nexport class AWSLexProvider extends AbstractInteractionsProvider {\n\tprivate lexRuntimeServiceClient: LexRuntimeServiceClient;\n\tprivate _botsCompleteCallback: object;\n\n\tconstructor(options: InteractionsOptions = {}) {\n\t\tsuper(options);\n\t\tthis._botsCompleteCallback = {};\n\t}\n\n\tgetProviderName() {\n\t\treturn 'AWSLexProvider';\n\t}\n\n\treportBotStatus(data, botname) {\n\t\t// Check if state is fulfilled to resolve onFullfilment promise\n\t\tlogger.debug('postContent state', data.dialogState);\n\t\tif (\n\t\t\tdata.dialogState === 'ReadyForFulfillment' ||\n\t\t\tdata.dialogState === 'Fulfilled'\n\t\t) {\n\t\t\tif (typeof this._botsCompleteCallback[botname] === 'function') {\n\t\t\t\tsetTimeout(\n\t\t\t\t\t() =>\n\t\t\t\t\t\tthis._botsCompleteCallback[botname](null, { slots: data.slots }),\n\t\t\t\t\t0\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis._config &&\n\t\t\t\ttypeof this._config[botname].onComplete === 'function'\n\t\t\t) {\n\t\t\t\tsetTimeout(\n\t\t\t\t\t() => this._config[botname].onComplete(null, { slots: data.slots }),\n\t\t\t\t\t0\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (data.dialogState === 'Failed') {\n\t\t\tif (typeof this._botsCompleteCallback[botname] === 'function') {\n\t\t\t\tsetTimeout(\n\t\t\t\t\t() => this._botsCompleteCallback[botname]('Bot conversation failed'),\n\t\t\t\t\t0\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis._config &&\n\t\t\t\ttypeof this._config[botname].onComplete === 'function'\n\t\t\t) {\n\t\t\t\tsetTimeout(\n\t\t\t\t\t() => this._config[botname].onComplete('Bot conversation failed'),\n\t\t\t\t\t0\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync sendMessage(\n\t\tbotname: string,\n\t\tmessage: string | InteractionsMessage\n\t): Promise<InteractionsResponse> {\n\t\tif (!this._config[botname]) {\n\t\t\treturn Promise.reject('Bot ' + botname + ' does not exist');\n\t\t}\n\t\tconst credentials = await Credentials.get();\n\t\tif (!credentials) {\n\t\t\treturn Promise.reject('No credentials');\n\t\t}\n\n\t\tthis.lexRuntimeServiceClient = new LexRuntimeServiceClient({\n\t\t\tregion: this._config[botname].region,\n\t\t\tcredentials,\n\t\t\tcustomUserAgent: getAmplifyUserAgent(),\n\t\t});\n\n\t\tlet params;\n\t\tif (typeof message === 'string') {\n\t\t\tparams = {\n\t\t\t\tbotAlias: this._config[botname].alias,\n\t\t\t\tbotName: botname,\n\t\t\t\tinputText: message,\n\t\t\t\tuserId: credentials.identityId,\n\t\t\t};\n\n\t\t\tlogger.debug('postText to lex', message);\n\n\t\t\ttry {\n\t\t\t\tconst postTextCommand = new PostTextCommand(params);\n\t\t\t\tconst data = await this.lexRuntimeServiceClient.send(postTextCommand);\n\t\t\t\tthis.reportBotStatus(data, botname);\n\t\t\t\treturn data;\n\t\t\t} catch (err) {\n\t\t\t\treturn Promise.reject(err);\n\t\t\t}\n\t\t} else {\n\t\t\tconst {\n\t\t\t\tcontent,\n\t\t\t\toptions: { messageType },\n\t\t\t} = message;\n\t\t\tif (messageType === 'voice') {\n\t\t\t\tparams = {\n\t\t\t\t\tbotAlias: this._config[botname].alias,\n\t\t\t\t\tbotName: botname,\n\t\t\t\t\tcontentType: 'audio/x-l16; sample-rate=16000',\n\t\t\t\t\tinputStream: content,\n\t\t\t\t\tuserId: credentials.identityId,\n\t\t\t\t\taccept: 'audio/mpeg',\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tparams = {\n\t\t\t\t\tbotAlias: this._config[botname].alias,\n\t\t\t\t\tbotName: botname,\n\t\t\t\t\tcontentType: 'text/plain; charset=utf-8',\n\t\t\t\t\tinputStream: content,\n\t\t\t\t\tuserId: credentials.identityId,\n\t\t\t\t\taccept: 'audio/mpeg',\n\t\t\t\t};\n\t\t\t}\n\t\t\tlogger.debug('postContent to lex', message);\n\t\t\ttry {\n\t\t\t\tconst postContentCommand = new PostContentCommand(params);\n\t\t\t\tconst data = await this.lexRuntimeServiceClient.send(\n\t\t\t\t\tpostContentCommand\n\t\t\t\t);\n\t\t\t\tconst audioArray = await convert(data.audioStream);\n\t\t\t\tthis.reportBotStatus(data, botname);\n\t\t\t\treturn { ...data, ...{ audioStream: audioArray } };\n\t\t\t} catch (err) {\n\t\t\t\treturn Promise.reject(err);\n\t\t\t}\n\t\t}\n\t}\n\n\tonComplete(botname: string, callback) {\n\t\tif (!this._config[botname]) {\n\t\t\tthrow new ErrorEvent('Bot ' + botname + ' does not exist');\n\t\t}\n\t\tthis._botsCompleteCallback[botname] = callback;\n\t}\n}\n","/*\n * Copyright 2017-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport {\n\tInteractionsOptions,\n\tInteractionsProviders,\n\tInteractionsProvider,\n\tInteractionsMessage,\n\tInteractionsResponse,\n} from './types';\nimport { Amplify, ConsoleLogger as Logger } from '@aws-amplify/core';\nimport { AWSLexProvider } from './Providers';\nconst logger = new Logger('Interactions');\n\nexport class InteractionsClass {\n\tprivate _options: InteractionsOptions;\n\n\tprivate _pluggables: InteractionsProviders;\n\n\t/**\n\t * Initialize PubSub with AWS configurations\n\t *\n\t * @param {InteractionsOptions} options - Configuration object for Interactions\n\t */\n\tconstructor(options: InteractionsOptions) {\n\t\tthis._options = options;\n\t\tlogger.debug('Interactions Options', this._options);\n\t\tthis._pluggables = {};\n\t}\n\n\tpublic getModuleName() {\n\t\treturn 'Interactions';\n\t}\n\n\t/**\n\t *\n\t * @param {InteractionsOptions} options - Configuration object for Interactions\n\t * @return {Object} - The current configuration\n\t */\n\tconfigure(options: InteractionsOptions) {\n\t\tconst opt = options ? options.Interactions || options : {};\n\t\tlogger.debug('configure Interactions', { opt });\n\t\tthis._options = { bots: {}, ...opt, ...opt.Interactions };\n\n\t\tconst aws_bots_config = this._options.aws_bots_config;\n\t\tconst bots_config = this._options.bots;\n\n\t\tif (!Object.keys(bots_config).length && aws_bots_config) {\n\t\t\t// Convert aws_bots_config to bots object\n\t\t\tif (Array.isArray(aws_bots_config)) {\n\t\t\t\taws_bots_config.forEach(bot => {\n\t\t\t\t\tthis._options.bots[bot.name] = bot;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// Check if AWSLex provider is already on pluggables\n\t\tif (\n\t\t\t!this._pluggables.AWSLexProvider &&\n\t\t\tbots_config &&\n\t\t\tObject.keys(bots_config)\n\t\t\t\t.map(key => bots_config[key])\n\t\t\t\t.find(bot => !bot.providerName || bot.providerName === 'AWSLexProvider')\n\t\t) {\n\t\t\tthis._pluggables.AWSLexProvider = new AWSLexProvider();\n\t\t}\n\n\t\tObject.keys(this._pluggables).map(key => {\n\t\t\tthis._pluggables[key].configure(this._options.bots);\n\t\t});\n\n\t\treturn this._options;\n\t}\n\n\tpublic addPluggable(pluggable: InteractionsProvider) {\n\t\tif (pluggable && pluggable.getCategory() === 'Interactions') {\n\t\t\tif (!this._pluggables[pluggable.getProviderName()]) {\n\t\t\t\tpluggable.configure(this._options.bots);\n\t\t\t\tthis._pluggables[pluggable.getProviderName()] = pluggable;\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t'Bot ' + pluggable.getProviderName() + ' already plugged'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async send(\n\t\tbotname: string,\n\t\tmessage: string\n\t): Promise<InteractionsResponse>;\n\tpublic async send(\n\t\tbotname: string,\n\t\tmessage: InteractionsMessage\n\t): Promise<InteractionsResponse>;\n\tpublic async send(\n\t\tbotname: string,\n\t\tmessage: object\n\t): Promise<InteractionsResponse>;\n\tpublic async send(\n\t\tbotname: string,\n\t\tmessage: string | object\n\t): Promise<InteractionsResponse> {\n\t\tif (!this._options.bots || !this._options.bots[botname]) {\n\t\t\tthrow new Error('Bot ' + botname + ' does not exist');\n\t\t}\n\n\t\tconst botProvider =\n\t\t\tthis._options.bots[botname].providerName || 'AWSLexProvider';\n\n\t\tif (!this._pluggables[botProvider]) {\n\t\t\tthrow new Error(\n\t\t\t\t'Bot ' +\n\t\t\t\t\tbotProvider +\n\t\t\t\t\t' does not have valid pluggin did you try addPluggable first?'\n\t\t\t);\n\t\t}\n\t\treturn await this._pluggables[botProvider].sendMessage(botname, message);\n\t}\n\n\tpublic onComplete(botname: string, callback: (err, confirmation) => void) {\n\t\tif (!this._options.bots || !this._options.bots[botname]) {\n\t\t\tthrow new Error('Bot ' + botname + ' does not exist');\n\t\t}\n\t\tconst botProvider =\n\t\t\tthis._options.bots[botname].providerName || 'AWSLexProvider';\n\n\t\tif (!this._pluggables[botProvider]) {\n\t\t\tthrow new Error(\n\t\t\t\t'Bot ' +\n\t\t\t\t\tbotProvider +\n\t\t\t\t\t' does not have valid pluggin did you try addPluggable first?'\n\t\t\t);\n\t\t}\n\t\tthis._pluggables[botProvider].onComplete(botname, callback);\n\t}\n}\n\nexport const Interactions = new InteractionsClass(null);\nAmplify.register(Interactions);\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { r as registerInstance, h, c as createEvent, H as Host, g as getElement } from './index-83f2275b.js';\nimport { Logger, browserOrNode, I18n } from '@aws-amplify/core';\nimport '@aws-amplify/auth';\nimport { T as Translations } from './Translations-108d469f.js';\nimport { c as NO_INTERACTIONS_MODULE_FOUND } from './constants-c8ecaa24.js';\nimport { Interactions } from '@aws-amplify/interactions';\n// AudioRecorder settings\nvar RECORDER_EXPORT_MIME_TYPE = 'application/octet-stream';\nvar DEFAULT_EXPORT_SAMPLE_RATE = 16000;\nvar FFT_SIZE = 2048; // window size in samples for Fast Fourier Transform (FFT)\nvar FFT_MAX_DECIBELS = -10; // maximum power value in the scaling range for the FFT analysis data\nvar FFT_MIN_DECIBELS = -90; // minimum power value in the scaling range for the FFT analysis data\nvar FFT_SMOOTHING_TIME_CONSTANT = 0.85; // averaging constant with the last analysis frame\n/**\n * Merges multiple buffers into one.\n */\nvar mergeBuffers = function (bufferArray, recLength) {\n    var result = new Float32Array(recLength);\n    var offset = 0;\n    for (var i = 0; i < bufferArray.length; i++) {\n        result.set(bufferArray[i], offset);\n        offset += bufferArray[i].length;\n    }\n    return result;\n};\n/**\n * Downsamples audio to desired export sample rate.\n */\nvar downsampleBuffer = function (buffer, recordSampleRate, exportSampleRate) {\n    if (exportSampleRate === recordSampleRate) {\n        return buffer;\n    }\n    var sampleRateRatio = recordSampleRate / exportSampleRate;\n    var newLength = Math.round(buffer.length / sampleRateRatio);\n    var result = new Float32Array(newLength);\n    var offsetResult = 0;\n    var offsetBuffer = 0;\n    while (offsetResult < result.length) {\n        var nextOffsetBuffer = Math.round((offsetResult + 1) * sampleRateRatio);\n        var accum = 0, count = 0;\n        for (var i = offsetBuffer; i < nextOffsetBuffer && i < buffer.length; i++) {\n            accum += buffer[i];\n            count++;\n        }\n        result[offsetResult] = accum / count;\n        offsetResult++;\n        offsetBuffer = nextOffsetBuffer;\n    }\n    return result;\n};\n/**\n * converts raw audio values to 16 bit pcm.\n */\nvar floatTo16BitPCM = function (output, offset, input) {\n    var byteOffset = offset;\n    for (var i = 0; i < input.length; i++, byteOffset += 2) {\n        var s = Math.max(-1, Math.min(1, input[i]));\n        output.setInt16(byteOffset, s < 0 ? s * 0x8000 : s * 0x7fff, true);\n    }\n};\n/**\n * Write given strings in big-endian order.\n */\nvar writeString = function (view, offset, string) {\n    for (var i = 0; i < string.length; i++) {\n        view.setUint8(offset + i, string.charCodeAt(i));\n    }\n};\n/**\n * Encodes raw pcm audio into a wav file.\n */\nvar encodeWAV = function (samples, exportSampleRate) {\n    /**\n     * WAV file consists of three parts: RIFF header, WAVE subchunk, and data subchunk. We precompute the size of them.\n     */\n    var audioSize = samples.length * 2; // We use 16-bit samples, so we have (2 * sampleLength) bytes.\n    var fmtSize = 24; // Byte size of the fmt subchunk: 24 bytes that the audio information that we'll set below.\n    var dataSize = 8 + audioSize; // Byte size of the data subchunk: raw sound data plus 8 bytes for the subchunk descriptions.\n    var totalByteSize = 12 + fmtSize + dataSize; // Byte size of the whole file, including the chunk header / descriptor.\n    // create DataView object to write byte values into\n    var buffer = new ArrayBuffer(totalByteSize); // buffer to write the chunk values in.\n    var view = new DataView(buffer);\n    /**\n     * Start writing the .wav file. We write top to bottom, so byte offset (first numeric argument) increases strictly.\n     */\n    // RIFF header\n    writeString(view, 0, 'RIFF'); // At offset 0, write the letters \"RIFF\"\n    view.setUint32(4, fmtSize + dataSize, true); // At offset 4, write the size of fmt and data chunk size combined.\n    writeString(view, 8, 'WAVE'); // At offset 8, write the format type \"WAVE\"\n    // fmt subchunk\n    writeString(view, 12, 'fmt '); //chunkdId 'fmt '\n    view.setUint32(16, fmtSize - 8, true); // fmt subchunk size below this value. We set 8 bytes already, so subtract 8 bytes from fmtSize.\n    view.setUint16(20, 1, true); // Audio format code, which is 1 for PCM.\n    view.setUint16(22, 1, true); // Number of audio channels. We use mono, ie 1.\n    view.setUint32(24, exportSampleRate, true); // Sample rate of the audio file.\n    view.setUint32(28, exportSampleRate * 2, true); // Data rate, or # of data bytes per second. Since each sample is 2 bytes, this is 2 * sampleRate.\n    view.setUint16(32, 2, true); // block align, # of bytes per sample including all channels, ie. 2 bytes.\n    view.setUint16(34, 16, true); // bits per sample, ie. 16 bits\n    // data subchunk\n    writeString(view, 36, 'data'); // write the chunkId 'data'\n    view.setUint32(40, audioSize, true); // Audio byte size\n    floatTo16BitPCM(view, 44, samples); // raw pcm values then go here.\n    return view;\n};\n/**\n * Given arrays of raw pcm audio, downsamples the audio to desired sample rate and encodes it to a wav audio file.\n *\n * @param recBuffer {Float32Array[]} - 2d float array containing the recorded raw audio\n * @param recLength {number} - total length of recorded audio\n * @param recordSampleRate {number} - sample rate of the recorded audio\n * @param exportSampleRate {number} - desired sample rate of the exported file\n */\nvar exportBuffer = function (recBuffer, recLength, recordSampleRate, exportSampleRate) {\n    var mergedBuffers = mergeBuffers(recBuffer, recLength);\n    var downsampledBuffer = downsampleBuffer(mergedBuffers, recordSampleRate, exportSampleRate);\n    var encodedWav = encodeWAV(downsampledBuffer, exportSampleRate);\n    var audioBlob = new Blob([encodedWav], {\n        type: RECORDER_EXPORT_MIME_TYPE,\n    });\n    return audioBlob;\n};\nvar logger = new Logger('AudioRecorder');\nvar AudioRecorder = /** @class */ (function () {\n    function AudioRecorder(options) {\n        // input mic stream is stored in a buffer\n        this.streamBuffer = [];\n        this.streamBufferLength = 0;\n        this.recording = false;\n        this.options = options;\n    }\n    /**\n     * This must be called first to enable audio context and request microphone access.\n     * Once access granted, it connects all the necessary audio nodes to the context so that it can begin recording or playing.\n     */\n    AudioRecorder.prototype.init = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!browserOrNode().isBrowser) return [3 /*break*/, 2];\n                        window.AudioContext =\n                            window.AudioContext || window.webkitAudioContext;\n                        this.audioContext = new AudioContext();\n                        return [4 /*yield*/, navigator.mediaDevices\n                                .getUserMedia({ audio: true })\n                                .then(function (stream) {\n                                _this.audioSupported = true;\n                                _this.setupAudioNodes(stream);\n                            })\n                                .catch(function () {\n                                _this.audioSupported = false;\n                                return Promise.reject('Audio is not supported');\n                            })];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        this.audioSupported = false;\n                        return [2 /*return*/, Promise.reject('Audio is not supported')];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Setup audio nodes after successful `init`.\n     */\n    AudioRecorder.prototype.setupAudioNodes = function (stream) {\n        return __awaiter(this, void 0, void 0, function () {\n            var err_1, sourceNode, processorNode, analyserNode;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, this.audioContext.resume()];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        err_1 = _a.sent();\n                        logger.error(err_1);\n                        return [3 /*break*/, 3];\n                    case 3:\n                        sourceNode = this.audioContext.createMediaStreamSource(stream);\n                        processorNode = this.audioContext.createScriptProcessor(4096, 1, 1);\n                        processorNode.onaudioprocess = function (audioProcessingEvent) {\n                            if (!_this.recording)\n                                return;\n                            var stream = audioProcessingEvent.inputBuffer.getChannelData(0);\n                            _this.streamBuffer.push(new Float32Array(stream)); // set to a copy of the stream\n                            _this.streamBufferLength += stream.length;\n                            _this.analyse();\n                        };\n                        analyserNode = this.audioContext.createAnalyser();\n                        analyserNode.minDecibels = FFT_MIN_DECIBELS;\n                        analyserNode.maxDecibels = FFT_MAX_DECIBELS;\n                        analyserNode.smoothingTimeConstant = FFT_SMOOTHING_TIME_CONSTANT;\n                        sourceNode.connect(analyserNode);\n                        analyserNode.connect(processorNode);\n                        processorNode.connect(sourceNode.context.destination);\n                        this.analyserNode = analyserNode;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Start recording audio and listen for silence.\n     *\n     * @param onSilence {SilenceHandler} - called whenever silence is detected\n     * @param visualizer {Visualizer} - called with audio data on each audio process to be used for visualization.\n     */\n    AudioRecorder.prototype.startRecording = function (onSilence, visualizer) {\n        return __awaiter(this, void 0, void 0, function () {\n            var context, err_2;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.recording || !this.audioSupported)\n                            return [2 /*return*/];\n                        this.onSilence = onSilence || function () { };\n                        this.visualizer = visualizer || function () { };\n                        context = this.audioContext;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, context.resume()];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_2 = _a.sent();\n                        logger.error(err_2);\n                        return [3 /*break*/, 4];\n                    case 4:\n                        this.start = Date.now();\n                        this.recording = true;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Pause recording\n     */\n    AudioRecorder.prototype.stopRecording = function () {\n        if (!this.audioSupported)\n            return;\n        this.recording = false;\n    };\n    /**\n     * Pause recording and clear audio buffer\n     */\n    AudioRecorder.prototype.clear = function () {\n        this.stopRecording();\n        this.streamBufferLength = 0;\n        this.streamBuffer = [];\n    };\n    /**\n     * Plays given audioStream with audioContext\n     *\n     * @param buffer {Uint8Array} - audioStream to be played\n     */\n    AudioRecorder.prototype.play = function (buffer) {\n        var _this = this;\n        if (!buffer || !this.audioSupported)\n            return;\n        var myBlob = new Blob([buffer]);\n        return new Promise(function (res, rej) {\n            var fileReader = new FileReader();\n            fileReader.onload = function () {\n                if (_this.playbackSource)\n                    _this.playbackSource.disconnect(); // disconnect previous playback source\n                _this.playbackSource = _this.audioContext.createBufferSource();\n                var successCallback = function (buf) {\n                    _this.playbackSource.buffer = buf;\n                    _this.playbackSource.connect(_this.audioContext.destination);\n                    _this.playbackSource.onended = function () {\n                        return res();\n                    };\n                    _this.playbackSource.start(0);\n                };\n                var errorCallback = function (err) {\n                    return rej(err);\n                };\n                _this.audioContext.decodeAudioData(fileReader.result, successCallback, errorCallback);\n            };\n            fileReader.onerror = function () { return rej(); };\n            fileReader.readAsArrayBuffer(myBlob);\n        });\n    };\n    /**\n     * Stops playing audio if there's a playback source connected.\n     */\n    AudioRecorder.prototype.stop = function () {\n        if (this.playbackSource) {\n            this.playbackSource.stop();\n        }\n    };\n    /**\n     * Called after each audioProcess. Check for silence and give fft time domain data to visualizer.\n     */\n    AudioRecorder.prototype.analyse = function () {\n        if (!this.audioSupported)\n            return;\n        var analyser = this.analyserNode;\n        analyser.fftSize = FFT_SIZE;\n        var bufferLength = analyser.fftSize;\n        var dataArray = new Uint8Array(bufferLength);\n        var amplitude = this.options.amplitude;\n        var time = this.options.time;\n        analyser.getByteTimeDomainData(dataArray);\n        this.visualizer(dataArray, bufferLength);\n        for (var i = 0; i < bufferLength; i++) {\n            // Normalize between -1 and 1.\n            var curr_value_time = dataArray[i] / 128 - 1.0;\n            if (curr_value_time > amplitude || curr_value_time < -1 * amplitude) {\n                this.start = Date.now();\n            }\n        }\n        var newtime = Date.now();\n        var elapsedTime = newtime - this.start;\n        if (elapsedTime > time) {\n            this.onSilence();\n        }\n    };\n    /**\n     * Encodes recorded buffer to a wav file and exports it to a blob.\n     *\n     * @param exportSampleRate {number} - desired sample rate of the exported buffer\n     */\n    AudioRecorder.prototype.exportWAV = function (exportSampleRate) {\n        if (exportSampleRate === void 0) { exportSampleRate = DEFAULT_EXPORT_SAMPLE_RATE; }\n        return __awaiter(this, void 0, void 0, function () {\n            var recordSampleRate, blob;\n            return __generator(this, function (_a) {\n                if (!this.audioSupported)\n                    return [2 /*return*/];\n                recordSampleRate = this.audioContext.sampleRate;\n                blob = exportBuffer(this.streamBuffer, this.streamBufferLength, recordSampleRate, exportSampleRate);\n                this.clear();\n                return [2 /*return*/, blob];\n            });\n        });\n    };\n    return AudioRecorder;\n}());\nvar visualize = function (dataArray, bufferLength, canvas) {\n    if (!canvas)\n        return;\n    if (!browserOrNode().isBrowser)\n        throw new Error('Visualization is not supported on non-browsers.');\n    var _a = canvas.getBoundingClientRect(), width = _a.width, height = _a.height;\n    // need to update the default canvas width and height\n    canvas.width = width;\n    canvas.height = height;\n    var canvasCtx = canvas.getContext('2d');\n    canvasCtx.fillStyle = 'white';\n    canvasCtx.clearRect(0, 0, width, height);\n    var draw = function () {\n        canvasCtx.fillRect(0, 0, width, height);\n        canvasCtx.lineWidth = 1;\n        var color = getComputedStyle(document.documentElement).getPropertyValue('--amplify-primary-color');\n        canvasCtx.strokeStyle = !color || color === '' ? '#ff9900' : color; // TODO: try separate css variable\n        canvasCtx.beginPath();\n        var sliceWidth = (width * 1.0) / bufferLength;\n        var x = 0;\n        for (var i = 0; i < bufferLength || i % 3 === 0; i++) {\n            var value = dataArray[i] / 128.0;\n            var y = (value * height) / 2;\n            if (i === 0) {\n                canvasCtx.moveTo(x, y);\n            }\n            else {\n                canvasCtx.lineTo(x, y);\n            }\n            x += sliceWidth;\n        }\n        canvasCtx.lineTo(canvas.width, canvas.height / 2);\n        canvasCtx.stroke();\n    };\n    // Register our draw function with requestAnimationFrame.\n    requestAnimationFrame(draw);\n};\nvar amplifyChatbotCss = \".bot .dot{background-color:var(--bot-dot-color)}.user .dot{background-color:var(--user-dot-color)}.dot-flashing{width:2.625rem}.dot-flashing .dot{display:inline-block;width:0.625rem;height:0.625rem;border-radius:10rem;opacity:0.65}.dot-flashing .left{-webkit-animation:dot-flashing 1s infinite alternate;animation:dot-flashing 1s infinite alternate;-webkit-animation-delay:0s;animation-delay:0s}.dot-flashing .middle{margin-left:0.375rem;margin-right:0.375rem;-webkit-animation:dot-flashing 1s infinite linear alternate;animation:dot-flashing 1s infinite linear alternate;-webkit-animation-delay:0.5s;animation-delay:0.5s}.dot-flashing .right{-webkit-animation:dot-flashing 1s infinite alternate;animation:dot-flashing 1s infinite alternate;-webkit-animation-delay:1s;animation-delay:1s}@-webkit-keyframes dot-flashing{0%{opacity:0.65}50%,100%{opacity:0.1}}@keyframes dot-flashing{0%{opacity:0.65}50%,100%{opacity:0.1}}:host{--width:28.75rem;--height:37.5rem;--header-color:var(--amplify-secondary-color);--header-size:var(--amplify-text-lg);--bot-background-color:rgb(230, 230, 230);--bot-text-color:black;--bot-dot-color:var(--bot-text-color);--user-background-color:var(--amplify-blue);--user-text-color:var(--amplify-white);--user-dot-color:var(--user-text-color)}.amplify-chatbot{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-direction:column;flex-direction:column;background-color:var(--background-color);border-radius:0.375rem;-webkit-box-shadow:0.0625rem 0rem 0.25rem 0 rgba(0, 0, 0, 0.15);box-shadow:0.0625rem 0rem 0.25rem 0 rgba(0, 0, 0, 0.15);-webkit-box-sizing:border-box;box-sizing:border-box;font-family:var(--amplify-font-family);margin-bottom:1rem;width:100%;height:var(--height);max-width:var(--width)}@media (min-width: 672px){.amplify-chatbot{width:var(--width)}}.header{padding:1.25rem 0.375rem 1.25rem 0.375rem;color:var(--header-color);font-size:var(--header-size);font-weight:bold;text-align:center;word-wrap:break-word}.body{border-top:0.0625rem solid rgba(0, 0, 0, 0.05);padding:1.5rem 1rem 0 1rem;display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-direction:column;flex-direction:column;overflow:auto}.bubble{max-width:100%;padding:0.8em 1.4em;text-align:left;word-wrap:break-word;margin-bottom:0.625rem}.bot{margin-right:auto;background-color:var(--bot-background-color);color:var(--bot-text-color);border-radius:1.5rem 1.5rem 1.5rem 0}.user{margin-left:auto;background-color:var(--user-background-color);color:var(--user-text-color);border-radius:1.5rem 1.5rem 0 1.5rem}.footer{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;border-top:0.062rem solid rgba(0, 0, 0, 0.05);padding-right:0.625rem;min-height:3.125rem}.footer amplify-input{--border:none;--margin:0;-ms-flex-positive:1;flex-grow:1}canvas{margin-left:0.625rem;margin-right:0.625rem;-ms-flex-positive:1;flex-grow:1;height:3.125rem}.icon-button{--icon-height:1.25rem;--icon-fill:var(--amplify-primary-color);--padding:0.625rem;--width:auto}\";\n// enum for possible bot states\nvar ChatState;\n(function (ChatState) {\n    ChatState[ChatState[\"Initial\"] = 0] = \"Initial\";\n    ChatState[ChatState[\"Listening\"] = 1] = \"Listening\";\n    ChatState[ChatState[\"SendingText\"] = 2] = \"SendingText\";\n    ChatState[ChatState[\"SendingVoice\"] = 3] = \"SendingVoice\";\n    ChatState[ChatState[\"Error\"] = 4] = \"Error\";\n})(ChatState || (ChatState = {}));\n// Message types\nvar MessageFrom;\n(function (MessageFrom) {\n    MessageFrom[\"Bot\"] = \"bot\";\n    MessageFrom[\"User\"] = \"user\";\n})(MessageFrom || (MessageFrom = {}));\n// Error types\nvar ChatErrorType;\n(function (ChatErrorType) {\n    ChatErrorType[ChatErrorType[\"Recoverable\"] = 0] = \"Recoverable\";\n    ChatErrorType[ChatErrorType[\"Unrecoverable\"] = 1] = \"Unrecoverable\";\n})(ChatErrorType || (ChatErrorType = {}));\nvar AmplifyChatbot = /** @class */ (function () {\n    function class_1(hostRef) {\n        var _this = this;\n        registerInstance(this, hostRef);\n        /** Clear messages when conversation finishes */\n        this.clearOnComplete = false;\n        /** Continue listening to users after they send the message */\n        this.conversationModeOn = false;\n        /** Text placed in the top header */\n        this.botTitle = Translations.CHATBOT_TITLE;\n        /** Whether voice chat is enabled */\n        this.voiceEnabled = false;\n        /** Whether text chat is enabled */\n        this.textEnabled = true;\n        /** Amount of silence (in ms) to wait for */\n        this.silenceTime = 1500;\n        /** Noise threshold between -1 and 1. Anything below is considered a silence. */\n        this.silenceThreshold = 0.2;\n        /** Messages in current session */\n        this.messages = [];\n        /** Text input box value  */\n        this.text = '';\n        /** Current app state */\n        this.chatState = ChatState.Initial;\n        /**\n         * Rendering methods\n         */\n        this.messageJSX = function (messages) {\n            var messageList = messages.map(function (message) { return (h(\"div\", { class: \"bubble \" + message.from }, message.content)); });\n            if (_this.chatState === ChatState.SendingText ||\n                _this.chatState === ChatState.SendingVoice) {\n                // if waiting for voice message, show animation on user side because app is waiting for transcript. Else put it on bot side.\n                var client = _this.chatState === ChatState.SendingText\n                    ? MessageFrom.Bot\n                    : MessageFrom.User;\n                messageList.push(h(\"div\", { class: \"bubble \" + client }, h(\"div\", { class: \"dot-flashing \" + client }, h(\"span\", { class: \"dot left\" }), h(\"span\", { class: \"dot middle\" }), h(\"span\", { class: \"dot right\" }))));\n            }\n            return messageList;\n        };\n        this.chatCompleted = createEvent(this, \"chatCompleted\", 7);\n    }\n    // Occurs when user presses enter in input box\n    class_1.prototype.submitHandler = function (_event) {\n        this.sendTextMessage();\n    };\n    /**\n     * Lifecycle functions\n     */\n    class_1.prototype.componentWillLoad = function () {\n        if (!Interactions || typeof Interactions.onComplete !== 'function') {\n            throw new Error(NO_INTERACTIONS_MODULE_FOUND);\n        }\n        this.validateProps();\n    };\n    class_1.prototype.componentDidRender = function () {\n        // scroll to the bottom if necessary\n        var body = this.element.shadowRoot.querySelector('.body');\n        body.scrollTop = body.scrollHeight;\n    };\n    class_1.prototype.validateProps = function () {\n        var _this = this;\n        if (!this.voiceEnabled && !this.textEnabled) {\n            this.setError(Translations.CHAT_DISABLED_ERROR, ChatErrorType.Unrecoverable);\n            return;\n        }\n        else if (!this.botName) {\n            this.setError(Translations.NO_BOT_NAME_ERROR, ChatErrorType.Unrecoverable);\n            return;\n        }\n        if (this.welcomeMessage)\n            this.appendToChat(this.welcomeMessage, MessageFrom.Bot);\n        // Initialize AudioRecorder if voice is enabled\n        if (this.voiceEnabled) {\n            this.audioRecorder = new AudioRecorder({\n                time: this.silenceTime,\n                amplitude: this.silenceThreshold,\n            });\n            this.audioRecorder.init().catch(function (err) {\n                _this.setError(err, ChatErrorType.Recoverable);\n            });\n        }\n        // Callback function to be called after chat is completed\n        var onComplete = function (err, data) {\n            _this.chatCompleted.emit({\n                data: data,\n                err: err,\n            });\n            if (_this.clearOnComplete) {\n                _this.reset();\n            }\n            else {\n                _this.chatState = ChatState.Initial;\n            }\n        };\n        try {\n            Interactions.onComplete(this.botName, onComplete);\n        }\n        catch (err) {\n            this.setError(err, ChatErrorType.Unrecoverable);\n        }\n    };\n    /**\n     * Handlers\n     */\n    class_1.prototype.handleSubmit = function (event) {\n        event.preventDefault();\n        this.sendTextMessage();\n    };\n    class_1.prototype.handleMicButton = function () {\n        var _this = this;\n        if (this.chatState !== ChatState.Initial)\n            return;\n        this.audioRecorder.stop();\n        this.chatState = ChatState.Listening;\n        this.audioRecorder.startRecording(function () { return _this.handleSilence(); }, function (data, length) { return _this.visualizer(data, length); });\n    };\n    class_1.prototype.handleSilence = function () {\n        var _this = this;\n        this.chatState = ChatState.SendingVoice;\n        this.audioRecorder.stopRecording();\n        this.audioRecorder.exportWAV().then(function (blob) {\n            _this.sendVoiceMessage(blob);\n        });\n    };\n    class_1.prototype.handleTextChange = function (event) {\n        var target = event.target;\n        this.text = target.value;\n    };\n    class_1.prototype.handleCancelButton = function () {\n        this.audioRecorder.clear();\n        this.chatState = ChatState.Initial;\n    };\n    class_1.prototype.handleToastClose = function (errorType) {\n        this.error = undefined; // clear error\n        // if error is recoverable, reset the app state to initial\n        if (errorType === ChatErrorType.Recoverable) {\n            this.chatState = ChatState.Initial;\n        }\n    };\n    /**\n     * Visualization\n     */\n    class_1.prototype.visualizer = function (dataArray, bufferLength) {\n        var canvas = this.element.shadowRoot.querySelector('canvas');\n        visualize(dataArray, bufferLength, canvas);\n    };\n    /**\n     * Interactions helpers\n     */\n    class_1.prototype.sendTextMessage = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var text, response, err_3;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.text.length === 0 || this.chatState !== ChatState.Initial)\n                            return [2 /*return*/];\n                        text = this.text;\n                        this.text = '';\n                        this.appendToChat(text, MessageFrom.User);\n                        this.chatState = ChatState.SendingText;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, Interactions.send(this.botName, text)];\n                    case 2:\n                        response = _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_3 = _a.sent();\n                        this.setError(err_3, ChatErrorType.Recoverable);\n                        return [2 /*return*/];\n                    case 4:\n                        if (response.message) {\n                            this.appendToChat(response.message, MessageFrom.Bot);\n                        }\n                        this.chatState = ChatState.Initial;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_1.prototype.sendVoiceMessage = function (audioInput) {\n        return __awaiter(this, void 0, void 0, function () {\n            var interactionsMessage, response, err_4, dialogState;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        interactionsMessage = {\n                            content: audioInput,\n                            options: {\n                                messageType: 'voice',\n                            },\n                        };\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, Interactions.send(this.botName, interactionsMessage)];\n                    case 2:\n                        response = _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_4 = _a.sent();\n                        this.setError(err_4, ChatErrorType.Recoverable);\n                        return [2 /*return*/];\n                    case 4:\n                        this.chatState = ChatState.Initial;\n                        dialogState = response.dialogState;\n                        if (response.inputTranscript)\n                            this.appendToChat(response.inputTranscript, MessageFrom.User);\n                        this.appendToChat(response.message, MessageFrom.Bot);\n                        return [4 /*yield*/, this.audioRecorder\n                                .play(response.audioStream)\n                                .then(function () {\n                                // if conversationMode is on, chat is incomplete, and mic button isn't pressed yet, resume listening.\n                                if (_this.conversationModeOn &&\n                                    dialogState !== 'Fulfilled' &&\n                                    dialogState !== 'Failed' &&\n                                    _this.chatState === ChatState.Initial) {\n                                    _this.handleMicButton();\n                                }\n                            })\n                                .catch(function (err) { return _this.setError(err, ChatErrorType.Recoverable); })];\n                    case 5:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_1.prototype.appendToChat = function (content, from) {\n        this.messages = __spreadArrays(this.messages, [\n            {\n                content: content,\n                from: from,\n            },\n        ]);\n    };\n    /**\n     * State control methods\n     */\n    class_1.prototype.setError = function (error, errorType) {\n        var message = typeof error === 'string' ? error : error.message;\n        this.chatState = ChatState.Error;\n        this.error = { message: message, errorType: errorType };\n    };\n    class_1.prototype.reset = function () {\n        this.chatState = ChatState.Initial;\n        this.text = '';\n        this.error = undefined;\n        this.messages = [];\n        if (this.welcomeMessage)\n            this.appendToChat(this.welcomeMessage, MessageFrom.Bot);\n        this.audioRecorder && this.audioRecorder.clear();\n    };\n    class_1.prototype.listeningFooterJSX = function () {\n        var _this = this;\n        var visualization = h(\"canvas\", { height: \"50\" });\n        var cancelButton = (h(\"amplify-button\", { \"data-test\": \"chatbot-cancel-button\", handleButtonClick: function () { return _this.handleCancelButton(); }, class: \"icon-button\", variant: \"icon\", icon: \"ban\" }));\n        return [visualization, cancelButton];\n    };\n    class_1.prototype.footerJSX = function () {\n        var _this = this;\n        if (this.chatState === ChatState.Listening)\n            return this.listeningFooterJSX();\n        var inputPlaceholder = this.textEnabled\n            ? Translations.TEXT_INPUT_PLACEHOLDER\n            : Translations.VOICE_INPUT_PLACEHOLDER;\n        var textInput = (h(\"amplify-input\", { placeholder: I18n.get(inputPlaceholder), description: \"text\", handleInputChange: function (evt) { return _this.handleTextChange(evt); }, value: this.text, disabled: this.chatState === ChatState.Error || !this.textEnabled }));\n        var micButton = this.voiceEnabled && (h(\"amplify-button\", { \"data-test\": \"chatbot-mic-button\", handleButtonClick: function () { return _this.handleMicButton(); }, class: \"icon-button\", variant: \"icon\", icon: \"microphone\", disabled: this.chatState === ChatState.Error ||\n                this.chatState !== ChatState.Initial }));\n        var sendButton = this.textEnabled && (h(\"amplify-button\", { \"data-test\": \"chatbot-send-button\", class: \"icon-button\", variant: \"icon\", icon: \"send\", handleButtonClick: function () { return _this.sendTextMessage(); }, disabled: this.chatState === ChatState.Error ||\n                this.chatState !== ChatState.Initial }));\n        return [textInput, micButton, sendButton];\n    };\n    class_1.prototype.errorToast = function () {\n        var _this = this;\n        if (!this.error)\n            return;\n        var _a = this.error, message = _a.message, errorType = _a.errorType;\n        return (h(\"amplify-toast\", { message: I18n.get(message), handleClose: function () { return _this.handleToastClose(errorType); } }));\n    };\n    class_1.prototype.render = function () {\n        var _this = this;\n        return (h(Host, null, h(\"div\", { class: \"amplify-chatbot\" }, h(\"slot\", { name: \"header\" }, h(\"div\", { class: \"header\", \"data-test\": \"chatbot-header\" }, I18n.get(this.botTitle))), h(\"div\", { class: \"body\", \"data-test\": \"chatbot-body\" }, this.messageJSX(this.messages)), h(\"form\", { onSubmit: function (e) { return _this.handleSubmit(e); } }, h(\"div\", { class: \"footer\", \"data-test\": \"chatbot-footer\" }, this.footerJSX())), this.errorToast())));\n    };\n    Object.defineProperty(class_1.prototype, \"element\", {\n        get: function () { return getElement(this); },\n        enumerable: false,\n        configurable: true\n    });\n    return class_1;\n}());\nAmplifyChatbot.style = amplifyChatbotCss;\nexport { AmplifyChatbot as amplify_chatbot };\n"],"names":["ActiveContextTimeToLive","ActiveContext","BadRequestException","ConflictException","DeleteSessionRequest","DeleteSessionResponse","InternalFailureException","LimitExceededException","NotFoundException","GetSessionRequest","FulfillmentState","MessageFormatType","DialogActionType","DialogAction","ConfirmationStatus","IntentSummary","GetSessionResponse","BadGatewayException","DependencyFailedException","LoopDetectedException","NotAcceptableException","PostContentRequest","DialogState","PostContentResponse","RequestTimeoutException","UnsupportedMediaTypeException","PostTextRequest","IntentConfidence","PredictedIntent","ContentType","Button","GenericAttachment","ResponseCard","SentimentResponse","PostTextResponse","PutSessionRequest","PutSessionResponse","logger","options","this","_config","configure","config","debug","getProviderName","getCategory","AWS_TEMPLATE","AWS_REGIONS","Set","AWS_CN_REGIONS","AWS_ISO_REGIONS","AWS_ISO_B_REGIONS","AWS_US_GOV_REGIONS","ClientSharedValues","apiVersion","disableHostPrefix","regionInfoProvider","region","regionInfo","undefined","hostname","partition","signingService","has","replace","Promise","resolve","serviceId","urlParser","ClientDefaultValues","runtime","base64Decoder","base64Encoder","bodyLengthChecker","credentialDefaultProvider","_","reject","Error","defaultUserAgentProvider","clientVersion","maxAttempts","invalidProvider","requestHandler","sha256","Sha256","streamCollector","utf8Decoder","fromUtf8","utf8Encoder","toUtf8","configuration","_config_0","_config_1","_config_2","_config_3","_config_4","_config_5","_config_6","middlewareStack","use","destroy","filterSensitiveLog","obj","parameters","slots","message","recentIntentSummaryView","map","item","sessionAttributes","dialogAction","activeContexts","requestAttributes","inputText","alternativeIntents","deserializeAws_restJson1PostContentCommandError","output","context","parseBody","body","parsedOutput","errorCode","loadRestJsonErrorCode","deserializeAws_restJson1BadGatewayExceptionResponse","response","name","$metadata","deserializeMetadata","deserializeAws_restJson1BadRequestExceptionResponse","deserializeAws_restJson1ConflictExceptionResponse","deserializeAws_restJson1DependencyFailedExceptionResponse","deserializeAws_restJson1InternalFailureExceptionResponse","deserializeAws_restJson1LimitExceededExceptionResponse","deserializeAws_restJson1LoopDetectedExceptionResponse","deserializeAws_restJson1NotAcceptableExceptionResponse","deserializeAws_restJson1NotFoundExceptionResponse","deserializeAws_restJson1RequestTimeoutExceptionResponse","deserializeAws_restJson1UnsupportedMediaTypeExceptionResponse","parsedBody","code","Code","Message","$fault","Object","assign","deserializeAws_restJson1PostTextCommandError","contents","data","retryAfterSeconds","headers","serializeAws_restJson1ActiveContextParametersMap","input","entries","reduce","acc","key","value","serializeAws_restJson1ActiveContextsList","filter","e","entry","timeToLive","serializeAws_restJson1ActiveContextTimeToLive","serializeAws_restJson1ActiveContext","timeToLiveInSeconds","turnsToLive","serializeAws_restJson1StringMap","deserializeAws_restJson1ActiveContextParametersMap","deserializeAws_restJson1ActiveContextsList","deserializeAws_restJson1ActiveContextTimeToLive","deserializeAws_restJson1ActiveContext","deserializeAws_restJson1genericAttachmentList","attachmentLinkUrl","buttons","deserializeAws_restJson1listOfButtons","imageUrl","subTitle","title","deserializeAws_restJson1GenericAttachment","deserializeAws_restJson1IntentConfidence","score","deserializeAws_restJson1IntentList","deserializeAws_restJson1PredictedIntent","text","deserializeAws_restJson1Button","intentName","nluIntentConfidence","deserializeAws_restJson1StringMap","deserializeAws_restJson1ResponseCard","contentType","genericAttachments","version","deserializeAws_restJson1SentimentResponse","sentimentLabel","sentimentScore","httpStatusCode","statusCode","requestId","extendedRequestId","cfId","collectBodyString","streamBody","Uint8Array","collectBody","then","isSerializableHeaderValue","getOwnPropertyNames","includes","length","size","encoded","JSON","parse","object","sanitizeErrorCode","rawValue","cleanValue","indexOf","split","headerKey","keys","find","k","toLowerCase","resolveMiddleware","clientStack","serialize","deserialize","stack","concat","handlerExecutionContext","clientName","commandName","inputFilterSensitiveLog","outputFilterSensitiveLog","request","handle","resolvedPath","botName","labelValue","botAlias","userId","stringify","endpoint","protocol","port","method","path","serializeAws_restJson1PostTextCommand","botVersion","dialogState","messageFormat","responseCard","sentimentResponse","sessionId","slotToElicit","deserializeAws_restJson1PostTextCommand","Buffer","from","toString","accept","inputStream","serializeAws_restJson1PostContentCommand","audioStream","inputTranscript","deserializeAws_restJson1PostContentCommand","convert","stream","Blob","ReadableStream","Response","arrayBuffer","buffer","_botsCompleteCallback","reportBotStatus","botname","setTimeout","onComplete","sendMessage","Credentials","credentials","lexRuntimeServiceClient","LexRuntimeServiceClient","customUserAgent","params","alias","identityId","postTextCommand","PostTextCommand","send","content","messageType","postContentCommand","PostContentCommand","audioArray","callback","ErrorEvent","AbstractInteractionsProvider","Interactions","_options","_pluggables","getModuleName","opt","bots","aws_bots_config","bots_config","Array","isArray","forEach","bot","AWSLexProvider","providerName","addPluggable","pluggable","botProvider","Amplify","ChatState","MessageFrom","ChatErrorType","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","rejected","result","done","apply","__generator","f","y","t","g","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","call","pop","push","__spreadArrays","s","i","il","arguments","r","a","j","jl","writeString","view","offset","string","setUint8","charCodeAt","encodeWAV","samples","exportSampleRate","audioSize","dataSize","ArrayBuffer","DataView","setUint32","fmtSize","setUint16","byteOffset","Math","max","min","setInt16","floatTo16BitPCM","exportBuffer","recBuffer","recLength","recordSampleRate","mergedBuffers","bufferArray","Float32Array","set","mergeBuffers","downsampledBuffer","sampleRateRatio","newLength","round","offsetResult","offsetBuffer","nextOffsetBuffer","accum","count","downsampleBuffer","encodedWav","type","Logger","AudioRecorder","streamBuffer","streamBufferLength","recording","prototype","init","_this","_a","browserOrNode","isBrowser","window","AudioContext","webkitAudioContext","audioContext","navigator","mediaDevices","getUserMedia","audio","audioSupported","setupAudioNodes","catch","err_1","sourceNode","processorNode","analyserNode","resume","error","createMediaStreamSource","createScriptProcessor","onaudioprocess","audioProcessingEvent","inputBuffer","getChannelData","analyse","createAnalyser","minDecibels","maxDecibels","smoothingTimeConstant","connect","destination","startRecording","onSilence","visualizer","err_2","start","Date","now","stopRecording","clear","play","myBlob","res","rej","fileReader","FileReader","onload","playbackSource","disconnect","createBufferSource","decodeAudioData","buf","onended","err","onerror","readAsArrayBuffer","stop","analyser","fftSize","bufferLength","dataArray","amplitude","time","getByteTimeDomainData","curr_value_time","exportWAV","blob","sampleRate","AmplifyChatbot","class_1","hostRef","registerInstance","clearOnComplete","conversationModeOn","botTitle","Translations","voiceEnabled","textEnabled","silenceTime","silenceThreshold","messages","chatState","Initial","messageJSX","messageList","h","class","SendingText","SendingVoice","client","Bot","User","chatCompleted","createEvent","submitHandler","_event","sendTextMessage","componentWillLoad","NO_INTERACTIONS_MODULE_FOUND","validateProps","componentDidRender","element","shadowRoot","querySelector","scrollTop","scrollHeight","welcomeMessage","appendToChat","audioRecorder","setError","Recoverable","emit","reset","Unrecoverable","handleSubmit","event","preventDefault","handleMicButton","Listening","handleSilence","sendVoiceMessage","handleTextChange","target","handleCancelButton","handleToastClose","errorType","canvas","getBoundingClientRect","width","height","canvasCtx","getContext","fillStyle","clearRect","requestAnimationFrame","fillRect","lineWidth","color","getComputedStyle","document","documentElement","getPropertyValue","strokeStyle","beginPath","sliceWidth","x","moveTo","lineTo","stroke","visualize","err_3","audioInput","interactionsMessage","err_4","listeningFooterJSX","handleButtonClick","variant","icon","footerJSX","inputPlaceholder","placeholder","I18n","description","handleInputChange","evt","disabled","errorToast","handleClose","render","Host","onSubmit","defineProperty","get","getElement","enumerable","configurable","style"],"sourceRoot":""}